(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21648e"],{c28a:function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{attrs:{id:"wrapper"}},[n("navbar",{staticClass:"animate__animated animate__fadeInLeft",staticStyle:{display:"none"},attrs:{id:"nav"}}),n("div",{staticClass:"d-flex flex-column animate__animated animate__fadeInRight",staticStyle:{display:"none !important"},attrs:{id:"content-wrapper"}},[n("div",{attrs:{id:"content"}},[n("header-btn"),n("div",{staticClass:"container-fluid"},[n("h3",{staticClass:"text-dark mb-4 multi-language"},[t._v(t._s("Employee Debts"))]),n("hr"),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-lg-1 col-md-1  mt-2"},[t._v(" Staffs: ")]),n("div",{staticClass:"col-12 col-lg-3 col-md-3"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.st_id,expression:"st_id"}],staticClass:"form-control",on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.st_id=a.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}}),t._l(t.staffs,(function(a){return n("option",{key:a.st_id,domProps:{value:a.st_id}},[t._v(" "+t._s(a.staff_name)+" ")])}))],2)])]),n("div",{staticClass:"row mt-2"},t._l(t.employees,(function(a){return n("div",{key:a.emp_id,staticClass:"col-12 col-lg-3 col-md-3 mb-2"},[n("button",{staticClass:"btn btn-primary btn-block",on:{click:function(n){return t.getEmployeeDebtInfo(a.emp_id)}}},[t._v(" "+t._s(a.full_name)+" ")])])})),0),n("hr"),n("div",{staticClass:"my-1 text-dark"},[t._v(" Employee: "+t._s(t.full_name)+" "),t.full_name?n("button",{staticClass:"btn btn-success btn-sm mx-3",attrs:{"data-toggle":"modal","data-target":"#mdl_transaction"},on:{click:function(a){return t.clearTransaction()}}},[n("i",{staticClass:"fa fa-plus"})]):t._e(),t.full_name?n("button",{staticClass:"btn btn-info btn-sm mx-3",on:{click:function(a){return t.clearEmployee()}}},[n("i",{staticClass:"fa fa-broom"})]):t._e()]),t.debt<0?n("div",{staticClass:"my-1 alert alert-warning"},[t._v(" The Employee must retrive: "+t._s((-1*t.debt).toLocaleString())+" "+t._s("Daily"==t.salary_type?"IQD":"$")+" ")]):n("div",{staticClass:"my-1 alert alert-primary"},[t._v(" The Company must give: "+t._s(t.debt.toLocaleString())+" "+t._s("Daily"==t.salary_type?"IQD":"$")+" ")]),n("v-data-table",{staticClass:"text-center",attrs:{headers:t.transactionHeader,items:t.debts,"foote-props":{"items-per-page-options":[15,20]}},scopedSlots:t._u([{key:"item",fn:function(a){var e=a.item,s=a.index;return[n("tr",[n("td",[t._v(" "+t._s(s+1)+" ")]),n("td",[t._v(" "+t._s((e.transactionAmount>0?e.transactionAmount:-1*e.transactionAmount).toLocaleString())+" "+t._s("Daily"==t.salary_type?"IQD":"$")+" ")]),n("td",[t._v(" "+t._s(t._f("typeFilter")(e.transactionType))+" ")]),n("td",[t._v(" "+t._s(new Date(e.transactionDate).toISOString().split("T")[0])+" ")]),n("td",[n("v-btn",{attrs:{color:"primary",icon:"","data-toggle":"modal","data-target":"#mdl_transaction"},on:{click:function(a){return t.getSingleTransaction(e)}}},[n("v-icon",[t._v(" mdi-pencil ")])],1),n("v-btn",{attrs:{color:"error",icon:""},on:{click:function(a){return t.deleteTransaction(e.dtID)}}},[n("v-icon",[t._v(" mdi-delete ")])],1)],1)])]}}])})],1)],1)]),n("change-pass"),n("div",{staticClass:"modal",attrs:{id:"mdl_transaction"}},[n("div",{staticClass:"modal-dialog modal-lg"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"mt-2"},[t._v(" Transaction Info ")]),n("button",{staticClass:"float-right btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(a){return t.clearTransaction()}}},[t._v(" Ã— ")])]),n("div",{staticClass:"modal-content"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row px-2 py-3"},[n("div",{staticClass:"col-1 pt-2"},[t._v(" Amount: ")]),n("div",{staticClass:"col-12 col-md-11 col-lg-11"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.singleTransaction.amount,expression:"singleTransaction.amount"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.singleTransaction.amount},on:{input:function(a){a.target.composing||t.$set(t.singleTransaction,"amount",a.target.value)}}})]),n("div",{staticClass:"form-check col-12 my-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.singleTransaction.transactionType,expression:"singleTransaction.transactionType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"radio",value:"Minus"},domProps:{checked:t._q(t.singleTransaction.transactionType,"Minus")},on:{change:function(a){return t.$set(t.singleTransaction,"transactionType","Minus")}}}),n("label",{staticClass:"form-check-label"},[t._v(" Give to Employee ")])]),n("div",{staticClass:"form-check col-12 my-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.singleTransaction.transactionType,expression:"singleTransaction.transactionType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"radio",value:"Plus"},domProps:{checked:t._q(t.singleTransaction.transactionType,"Plus")},on:{change:function(a){return t.$set(t.singleTransaction,"transactionType","Plus")}}}),n("label",{staticClass:"form-check-label"},[t._v(" Retrive from Employee ")])]),n("div",{staticClass:"col-1 pt-2 mt-3"},[t._v(" Note: ")]),n("div",{staticClass:"col-12 col-md-11 col-lg-11 mt-3"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.singleTransaction.note,expression:"singleTransaction.note"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.singleTransaction.note},on:{input:function(a){a.target.composing||t.$set(t.singleTransaction,"note",a.target.value)}}})]),t.singleTransaction.dtID?n("button",{staticClass:"btn btn-warning btn-block mt-1",on:{click:function(a){return t.updateTransaction()}}},[t._v(" Save changes ")]):n("button",{staticClass:"btn btn-primary btn-block mt-1",on:{click:function(a){return t.addTransaction()}}},[t._v(" Add ")])])])])])])])],1)},s=[],i=(n("13d5"),n("1ab6")),o=n("c735"),l={data(){return{staffs:[],employees:[],emp_id:[],st_id:null,full_name:null,salary_type:"Daily",debts:[],singleTransaction:{dtID:null,amount:0,transactionType:null,note:null}}},beforeCreate(){Object(i["a"])("attendance")},created(){this.$http.post("/staff/getData").then(({data:t})=>{this.staffs=t.sort((t,a)=>t.staff_sort_code-a.staff_sort_code)}).catch(t=>{Object(o["a"])(t)})},methods:{clearTransaction(){this.singleTransaction.dtID=null,this.singleTransaction.amount=0,this.singleTransaction.transactionType=null,this.singleTransaction.note=null},clearEmployee(){this.emp_id=null,this.full_name=null,this.salary_type="Daily",this.debts=[]},getEmployeeDebtInfo(t){const a=this.employees.find(a=>a.emp_id==t);this.emp_id=t,this.full_name=a.full_name,this.salary_type=a.salary_type,this.$http.get("/employee/getEmployeeTransaction/"+t).then(({data:t})=>{this.debts=t})},addTransaction(){this.singleTransaction.amount>0&&this.singleTransaction.transactionType?this.$http.post("/employee/addDebtTransaction",{emp_id:this.emp_id,transactionAmount:this.singleTransaction.amount,transactionType:this.singleTransaction.transactionType,note:this.singleTransaction.note}).then(({data:t})=>{this.debts.unshift({dtID:t.dtID,emp_id:this.emp_id,transactionAmount:"Minus"==this.singleTransaction.transactionType?-1*this.singleTransaction.amount:this.singleTransaction.amount,transactionType:this.singleTransaction.transactionType,transactionDate:(new Date).toISOString().split("T")[0],note:this.singleTransaction.note||null}),this.clearTransaction()}):this.$alert("Please fill all informations correctly","","warning")},getSingleTransaction(t){this.singleTransaction.dtID=t.dtID,this.singleTransaction.amount="Plus"==t.transactionType?t.transactionAmount:-1*t.transactionAmount,this.singleTransaction.transactionType=t.transactionType,this.singleTransaction.note=t.note},updateTransaction(){this.$http.patch("/employee/updateDebtTransaction/"+this.singleTransaction.dtID,{transactionAmount:this.singleTransaction.amount,transactionType:this.singleTransaction.transactionType,note:this.singleTransaction.note}).then(()=>{let t=this.debts.findIndex(t=>t.dtID==this.singleTransaction.dtID);this.debts[t].transactionAmount="Minus"==this.singleTransaction.transactionType?-1*this.singleTransaction.amount:this.singleTransaction.amount,this.debts[t].transactionType=this.singleTransaction.transactionType,this.debts[t].note=this.singleTransaction.note,this.$alert("Success","","success")})},deleteTransaction(t){this.$confirm("Are you sure delete this data ?","","question").then(()=>{this.$http.delete("/employee/deleteDebtTransaction/"+t).then(()=>{this.debts=this.debts.filter(a=>a.dtID!=t)})})}},computed:{debt(){return this.debts.reduce((t,a)=>t+Number(a.transactionAmount),0)},transactionHeader(){return[{text:"#",align:"center",sortable:!1},{text:"Amount",align:"center",sortable:!1},{text:"Type",align:"center",sortable:!1},{text:"Date",align:"center",sortable:!1},{text:"Actions",align:"center",sortable:!1}]}},filters:{typeFilter(t){return{Plus:"Retrieved from Employee",Minus:"Gived to Employee"}[t]}},watch:{st_id(t){t?this.$http.post("/employee/getEmployeeBystaff/"+t).then(({data:t})=>{this.employees=t}):this.employees=[]}}},r=l,c=n("2877"),d=n("6544"),m=n.n(d),u=n("8336"),p=n("8fea"),h=n("132d"),g=Object(c["a"])(r,e,s,!1,null,null,null);a["default"]=g.exports;m()(g,{VBtn:u["a"],VDataTable:p["a"],VIcon:h["a"]})}}]);
//# sourceMappingURL=chunk-2d21648e.fbddcad1.js.map