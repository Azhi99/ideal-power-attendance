{"version":3,"sources":["webpack:///./src/components/work_projects.vue?3c7d","webpack:///src/components/work_projects.vue","webpack:///./src/components/work_projects.vue?d691","webpack:///./src/components/work_projects.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","_m","on","$event","clearProject","_v","clearStaffProject","headers","work_projects","scopedSlots","_u","key","fn","ref","item","work_project_status","updateStatus","work_project_id","getSingleProject","deleteProject","directives","name","rawName","value","work_project","expression","domProps","type","indexOf","_k","keyCode","updateProject","addProject","target","composing","$set","loading_add_project","staff_project","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","_l","staff","st_id","_s","staff_name","project","work_project_name","staff_work_project_id","updateStaffProject","staff_work_project_headers","staff_projects","selectSingleStaffProject","staticRenderFns","data","text","align","sortable","staffs","beforeCreate","auth","created","mounted","methods","catch","alert","finally","then","component","VBtn","VDataTable","VIcon"],"mappings":"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","file":"js/chunk-2d2161f4.1dcf0964.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"wrapper\"}},[_c('navbar',{staticClass:\"no-print animate__animated animate__fadeInLeft\",staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"nav\"}}),_c('div',{staticClass:\"d-flex flex-column animate__animated animate__fadeInRight\",staticStyle:{\"display\":\"none !important\"},attrs:{\"id\":\"content-wrapper\"}},[_c('div',{attrs:{\"id\":\"content\"}},[_c('header-btn',{staticClass:\"no-print\"}),_c('div',{staticClass:\"container-fluid text-dark\"},[_vm._m(0),_c('hr'),_c('div',{staticClass:\"row\"},[_c('button',{staticClass:\"btn btn-success col-xl-2 col-lg-2 col-md-2 col-sm-12\",staticStyle:{\"height\":\"39px\"},attrs:{\"data-toggle\":\"modal\",\"data-target\":\"#mdl_project\"},on:{\"click\":function($event){return _vm.clearProject()}}},[_vm._v(\" Add Project \"),_c('i',{staticClass:\"fa fa-plus\"})]),_c('button',{staticClass:\"btn btn-warning col-xl-2 col-lg-2 col-md-2 ms-2 col-sm-12\",staticStyle:{\"height\":\"39px\"},attrs:{\"data-toggle\":\"modal\",\"data-target\":\"#mdl_staff_project\"},on:{\"click\":function($event){return _vm.clearStaffProject()}}},[_vm._v(\" Staff Projects \")]),_c('a',{staticClass:\"btn btn-primary text-white col-xl-2 col-md-5 mx-2 mb-2\",attrs:{\"href\":\"/work_projects_report\"}},[_vm._v(\" Report \")])])]),_c('v-data-table',{staticClass:\"mx-2 mt-3\",attrs:{\"headers\":_vm.headers,\"items\":_vm.work_projects},scopedSlots:_vm._u([{key:\"item.work_project_status\",fn:function(ref){\nvar item = ref.item;\nreturn [(item.work_project_status == 'enabled')?_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"success\"},on:{\"click\":function($event){return _vm.updateStatus(item.work_project_id, 'disabled')}}},[_c('v-icon',[_vm._v(\" fas fa-check \")])],1):_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.updateStatus(item.work_project_id, 'enabled')}}},[_c('v-icon',[_vm._v(\" mdi-cancel \")])],1)]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"primary\",\"data-toggle\":\"modal\",\"data-target\":\"#mdl_project\"},on:{\"click\":function($event){return _vm.getSingleProject(item)}}},[_c('v-icon',[_vm._v(\" mdi-pencil \")])],1),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.deleteProject(item)}}},[_c('v-icon',[_vm._v(\" mdi-delete \")])],1)]}}],null,true)})],1)]),_c('change-pass'),_c('div',{staticClass:\"modal text-dark animate__animated animate__fadeInDown animate__faster\",attrs:{\"id\":\"mdl_project\"}},[_c('div',{staticClass:\"modal-dialog modal-md\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('button',{staticClass:\"btn btn-danger\",attrs:{\"data-dismiss\":\"modal\"},on:{\"click\":function($event){return _vm.clearProject()}}},[_vm._v(\"×\")]),_c('h5',{staticClass:\"mt-2\"},[_vm._v(\"Project Information\")])]),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"container-fluid px-0\"},[_c('div',{staticClass:\"row pe-4\"},[_c('label',{staticClass:\"col-2 mt-2 ps-4\"},[_vm._v(\"Project: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.work_project.work_project_name),expression:\"work_project.work_project_name\"}],staticClass:\"form-control col-10\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.work_project.work_project_name)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.work_project.work_project_id ? _vm.updateProject() : _vm.addProject()},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.work_project, \"work_project_name\", $event.target.value)}}})]),(!_vm.work_project.work_project_id)?_c('button',{staticClass:\"btn btn-success btn-block mt-3\",attrs:{\"disabled\":_vm.loading_add_project},on:{\"click\":function($event){return _vm.addProject()}}},[_c('i',{staticClass:\"fa fa-plus\"})]):_c('button',{staticClass:\"btn btn-warning btn-block mt-3\",attrs:{\"disabled\":_vm.loading_add_project},on:{\"click\":function($event){return _vm.updateProject()}}},[_c('i',{staticClass:\"fa fa-save\"})])])])])])]),_c('div',{staticClass:\"modal text-dark animate__animated animate__fadeInDown animate__faster\",attrs:{\"id\":\"mdl_staff_project\"}},[_c('div',{staticClass:\"modal-dialog modal-lg\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('button',{staticClass:\"btn btn-danger\",attrs:{\"data-dismiss\":\"modal\"},on:{\"click\":function($event){return _vm.clearStaffProject()}}},[_vm._v(\"×\")]),_c('h5',{staticClass:\"mt-2\"},[_vm._v(\"Staff Projects\")])]),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"container-fluid px-0\"},[_c('div',{staticClass:\"row pe-4\"},[_c('label',{staticClass:\"col-2 mt-2 ps-4\"},[_vm._v(\"Staff: \")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.staff_project.st_id),expression:\"staff_project.st_id\"}],staticClass:\"form-control col-10\",attrs:{\"disabled\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.staff_project, \"st_id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}}),_vm._l((_vm.staffs),function(staff){return _c('option',{key:staff.st_id,domProps:{\"value\":staff.st_id}},[_vm._v(\" \"+_vm._s(staff.staff_name)+\" \")])})],2)]),_c('div',{staticClass:\"row pe-4 mt-3\"},[_c('label',{staticClass:\"col-2 mt-2 ps-4\"},[_vm._v(\"Project: \")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.staff_project.work_project_id),expression:\"staff_project.work_project_id\"}],staticClass:\"form-control col-10\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.staff_project, \"work_project_id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}}),_vm._l((_vm.work_projects),function(project){return _c('option',{key:project.work_project_id,domProps:{\"value\":project.work_project_id}},[_vm._v(\" \"+_vm._s(project.work_project_name)+\" \")])})],2)]),_c('button',{staticClass:\"btn btn-warning btn-block mt-3\",attrs:{\"disabled\":!_vm.staff_project.staff_work_project_id},on:{\"click\":function($event){return _vm.updateStaffProject()}}},[_c('i',{staticClass:\"fa fa-save\"})]),_c('v-data-table',{staticClass:\"mt-3\",attrs:{\"headers\":_vm.staff_work_project_headers,\"items\":_vm.staff_projects},scopedSlots:_vm._u([{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.selectSingleStaffProject(item)}}},[_c('v-icon',[_vm._v(\" mdi-pencil \")])],1)]}}],null,true)})],1)])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-sm-flex justify-content-between align-items-center mb-4\"},[_c('h3',{staticClass:\"text-dark mb-0\"},[_vm._v(\" Projects\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div id=\"wrapper\">\r\n        <navbar id=\"nav\" class=\"no-print animate__animated animate__fadeInLeft\"  style=\"display: none;\"/>\r\n        <div class=\"d-flex flex-column animate__animated animate__fadeInRight\" id=\"content-wrapper\" style=\"display: none !important;\">\r\n            <div id=\"content\">\r\n                <header-btn class=\"no-print\"/>\r\n                <div class=\"container-fluid text-dark\">\r\n                    <div class=\"d-sm-flex justify-content-between align-items-center mb-4\">\r\n                        <h3 class=\"text-dark mb-0\" > Projects</h3>\r\n                    </div>\r\n                    <hr>\r\n                    <div class=\"row\">\r\n                        <button class=\"btn btn-success col-xl-2 col-lg-2 col-md-2 col-sm-12\" style=\"height: 39px;\" data-toggle=\"modal\" data-target=\"#mdl_project\" @click=\"clearProject()\">\r\n                            Add Project &nbsp;\r\n                            <i class=\"fa fa-plus\"></i>\r\n                        </button>\r\n                        <button class=\"btn btn-warning col-xl-2 col-lg-2 col-md-2 ms-2 col-sm-12\" style=\"height: 39px;\" data-toggle=\"modal\" data-target=\"#mdl_staff_project\" @click=\"clearStaffProject()\">\r\n                            Staff Projects &nbsp;\r\n                        </button>\r\n                        <a class=\"btn btn-primary text-white col-xl-2 col-md-5 mx-2 mb-2\" href=\"/work_projects_report\"> Report </a>\r\n                    </div>\r\n                </div>\r\n\r\n                <v-data-table class=\"mx-2 mt-3\" :headers=\"headers\" :items=\"work_projects\">\r\n                    \r\n                    <template v-slot:[`item.work_project_status`]=\"{item}\">\r\n                        <v-btn icon color=\"success\" @click=\"updateStatus(item.work_project_id, 'disabled')\" v-if=\"item.work_project_status == 'enabled'\"> <v-icon> fas fa-check </v-icon> </v-btn>\r\n                        <v-btn icon color=\"error\" @click=\"updateStatus(item.work_project_id, 'enabled')\" v-else> <v-icon> mdi-cancel </v-icon> </v-btn>\r\n                    </template>\r\n\r\n                    <template v-slot:[`item.actions`]=\"{item}\">\r\n                        <v-btn icon color=\"primary\" @click=\"getSingleProject(item)\" data-toggle=\"modal\" data-target=\"#mdl_project\"> <v-icon> mdi-pencil </v-icon> </v-btn>\r\n                        <v-btn icon color=\"error\" @click=\"deleteProject(item)\" > <v-icon> mdi-delete </v-icon> </v-btn>\r\n                    </template>\r\n                </v-data-table>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Modals -->\r\n        <change-pass/>\r\n\r\n        <div class=\"modal text-dark animate__animated animate__fadeInDown animate__faster\" id=\"mdl_project\">\r\n            <div class=\"modal-dialog modal-md\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <button class=\"btn btn-danger\" @click=\"clearProject()\" data-dismiss=\"modal\">&times;</button>\r\n                        <h5 class=\"mt-2\">Project Information</h5>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"container-fluid px-0\">\r\n                            <div class=\"row pe-4\">\r\n                                <label class=\"col-2 mt-2 ps-4\">Project: </label>\r\n                                <input type=\"text\" class=\"form-control col-10\" v-model=\"work_project.work_project_name\" @keyup.enter=\"work_project.work_project_id ? updateProject() : addProject()\">\r\n                            </div>\r\n                            <button class=\"btn btn-success btn-block mt-3\" @click=\"addProject()\" :disabled=\"loading_add_project\" v-if=\"!work_project.work_project_id\">\r\n                                <i class=\"fa fa-plus\"></i>\r\n                            </button>\r\n                            <button class=\"btn btn-warning btn-block mt-3\" @click=\"updateProject()\" :disabled=\"loading_add_project\" v-else>\r\n                                <i class=\"fa fa-save\"></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"modal text-dark animate__animated animate__fadeInDown animate__faster\" id=\"mdl_staff_project\">\r\n            <div class=\"modal-dialog modal-lg\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <button class=\"btn btn-danger\" @click=\"clearStaffProject()\" data-dismiss=\"modal\">&times;</button>\r\n                        <h5 class=\"mt-2\">Staff Projects</h5>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <div class=\"container-fluid px-0\">\r\n                            <div class=\"row pe-4\">\r\n                                <label class=\"col-2 mt-2 ps-4\">Staff: </label>\r\n                                <select class=\"form-control col-10\" v-model=\"staff_project.st_id\" disabled>\r\n                                    <option value=\"\"></option>\r\n                                    <option v-for=\"staff in staffs\" :key=\"staff.st_id\" :value=\"staff.st_id\"> {{ staff.staff_name }} </option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"row pe-4 mt-3\">\r\n                                <label class=\"col-2 mt-2 ps-4\">Project: </label>\r\n                                <select class=\"form-control col-10\" v-model=\"staff_project.work_project_id\" >\r\n                                    <option value=\"\"></option>\r\n                                    <option v-for=\"project in work_projects\" :key=\"project.work_project_id\" :value=\"project.work_project_id\"> {{ project.work_project_name }} </option>\r\n                                </select>\r\n                            </div>\r\n                            <button class=\"btn btn-warning btn-block mt-3\" @click=\"updateStaffProject()\" :disabled=\"!staff_project.staff_work_project_id\">\r\n                                <i class=\"fa fa-save\"></i>\r\n                            </button>\r\n\r\n                            <v-data-table class=\"mt-3\" :headers=\"staff_work_project_headers\" :items=\"staff_projects\">\r\n                                <template v-slot:[`item.actions`]=\"{item}\">\r\n                                    <v-btn icon color=\"primary\" @click=\"selectSingleStaffProject(item)\"> <v-icon> mdi-pencil </v-icon> </v-btn>\r\n                                </template>\r\n                            </v-data-table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// import showError from \"../showError.js\";\r\nimport auth from '../auth';\r\n// const nullValues = [\"\", null];\r\n\r\nexport default {\r\n    name: \"work_projects\",\r\n    data() {\r\n        return {\r\n            work_project: {\r\n                work_project_id: null,\r\n                work_project_name: null,\r\n                work_project_status: null\r\n            },\r\n            work_projects: [],\r\n            loading_add_project: false,\r\n            headers: [\r\n                {\r\n                    text: 'Project',\r\n                    align: 'start',\r\n                    sortable: true,\r\n                    value: 'work_project_name',\r\n                },\r\n                {\r\n                    text: 'Status',\r\n                    align: 'start',\r\n                    sortable: true,\r\n                    value: 'work_project_status',\r\n                },\r\n                {\r\n                    text: 'Actions',\r\n                    align: 'start',\r\n                    sortable: false,\r\n                    value: 'actions',\r\n                }\r\n            ],\r\n            staff_work_project_headers: [\r\n                {\r\n                    text: 'Staff',\r\n                    align: 'start',\r\n                    sortable: true,\r\n                    value: 'staff_name',\r\n                },\r\n                {\r\n                    text: 'Project',\r\n                    align: 'start',\r\n                    sortable: true,\r\n                    value: 'work_project_name',\r\n                },\r\n                {\r\n                    text: 'Actions',\r\n                    align: 'start',\r\n                    sortable: false,\r\n                    value: 'actions',\r\n                }\r\n            ],\r\n            staff_projects: [],\r\n            staff_project: {\r\n                staff_work_project_id: null,\r\n                st_id: null,\r\n                work_project_id: null,\r\n            },\r\n            staffs: []\r\n        }\r\n    },\r\n    beforeCreate(){\r\n        auth(\"workProjects\")\r\n    },\r\n    created() {\r\n        this.$http.post('/staff/getData').then(({data})=>{\r\n            this.staffs = data.filter(obj => obj.show_staff == '1').sort((a, b) => a.staff_sort_code - b.staff_sort_code)\r\n        })\r\n    },\r\n    mounted() {\r\n        this.$http.post('/work_projects/getData').then(r => {\r\n            this.work_projects = r.data\r\n\r\n            this.$http.get('/work_projects/getStaffProjects').then(r => {\r\n                this.staff_projects = r.data\r\n            })\r\n        })\r\n    },\r\n    methods: {\r\n        clearProject(){\r\n            this.work_project = {\r\n                work_project_id: null,\r\n                work_project_name: null,\r\n                work_project_status: 'enabled'\r\n            }\r\n        },\r\n        addProject(){\r\n            if(!this.work_project.work_project_name) {\r\n                alert('Please enter project name')\r\n                return \r\n            }\r\n            this.loading_add_project = true\r\n\r\n            this.$http.post('/work_projects/addProject', this.work_project).then(r => {\r\n                this.work_projects.push({\r\n                    work_project_id: r.data.work_project_id,\r\n                    work_project_name: this.work_project.work_project_name,\r\n                    work_project_status: this.work_project.work_project_status\r\n                })\r\n                this.clearProject()\r\n            }).catch(() => {\r\n                alert('Failed to add project')\r\n            }).finally(() => {\r\n                this.loading_add_project = false\r\n            })\r\n        },\r\n        getSingleProject(item){\r\n            this.work_project = JSON.parse(JSON.stringify(item))\r\n        },\r\n        updateProject() {\r\n            if(!this.work_project.work_project_name) {\r\n                alert('Please enter project name')\r\n                return \r\n            }\r\n            this.loading_add_project = true\r\n\r\n            this.$http.patch('/work_projects/updateProject/' + this.work_project.work_project_id, this.work_project).then(() => {\r\n                const index = this.work_projects.findIndex(x => x.work_project_id == this.work_project.work_project_id)\r\n                this.$set(this.work_projects, index, JSON.parse(JSON.stringify(this.work_project)))\r\n                alert('Project updated successfully')\r\n            }).catch(() => {\r\n                alert('Failed to update project')\r\n            }).finally(() => {\r\n                this.loading_add_project = false\r\n            })\r\n        },\r\n        deleteProject(item) {\r\n            const c = confirm('Are you sure you want to delete this project?')\r\n            if(c) {\r\n                this.$http.delete('/work_projects/deleteProject/' + item.work_project_id).then(() => {\r\n                    this.work_projects = this.work_projects.filter(x => x.work_project_id != item)\r\n                }).catch(() => {\r\n                    alert('Failed, Project may be used in other records')\r\n                })\r\n            }\r\n        },\r\n        updateStatus(id, status) {\r\n            if(status == 'enabled') {\r\n                const c = confirm('Are you sure you want to enable this project?')\r\n                if(!c) return\r\n            } else {\r\n                const c = confirm('Are you sure you want to disable this project?')\r\n                if(!c) return\r\n            }\r\n\r\n            this.$http.patch('/work_projects/updateStatus/' + id, {work_project_status: status}).then(() => {\r\n                const index = this.work_projects.findIndex(x => x.work_project_id == id)\r\n                this.$set(this.work_projects[index], 'work_project_status', status)\r\n            }).catch(() => {\r\n                alert('Failed to update status')\r\n            })\r\n        },\r\n        clearStaffProject() {\r\n            this.staff_project = {\r\n                staff_work_project_id: null,\r\n                st_id: null,\r\n                work_project_id: null\r\n            }\r\n        },\r\n        selectSingleStaffProject(item) {\r\n            this.staff_project = JSON.parse(JSON.stringify(item))\r\n        },\r\n        updateStaffProject() {\r\n            if(!this.staff_project.st_id || !this.staff_project.work_project_id) {\r\n                alert('Please select staff and project')\r\n                return\r\n            }\r\n\r\n            this.$http.patch('/work_projects/updateStaffProject/' + this.staff_project.staff_work_project_id, {\r\n                work_project_id: this.staff_project.work_project_id\r\n            }).then(() => {\r\n                const index = this.staff_projects.findIndex(x => x.staff_work_project_id == this.staff_project.staff_work_project_id)\r\n                this.$set(this.staff_projects[index], 'work_project_id', this.staff_project.work_project_id)\r\n                this.$set(this.staff_projects[index], 'work_project_name', this.work_projects.find(x => x.work_project_id == this.staff_project.work_project_id).work_project_name)\r\n                alert('Staff project updated successfully')\r\n            }).catch(() => {\r\n                alert('Failed to update staff project')\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./work_projects.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./work_projects.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./work_projects.vue?vue&type=template&id=378aa1ae&\"\nimport script from \"./work_projects.vue?vue&type=script&lang=js&\"\nexport * from \"./work_projects.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VDataTable,VIcon})\n"],"sourceRoot":""}