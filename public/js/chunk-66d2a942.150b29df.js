(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66d2a942"],{"036f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrapper"}},[a("navbar",{staticClass:"no-print animate__animated animate__fadeInLeft",staticStyle:{display:"none"},attrs:{id:"nav"}}),a("div",{staticClass:"d-flex flex-column animate__animated animate__fadeInRight",staticStyle:{display:"none !important"},attrs:{id:"content-wrapper"}},[a("div",{attrs:{id:"content"}},[a("header-btn",{staticClass:"no-print"}),a("div",{staticClass:"px-0-print container-fluid text-dark"},[a("div",{staticClass:"row px-1 py-3 mb-1 no-print"},[a("label",{staticClass:"mt-2 ms-2 me-3 mb-2"},[t._v(" From: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.from,expression:"from"}],staticClass:"form-control col-sm-2",attrs:{type:"date"},domProps:{value:t.from},on:{change:function(e){return t.getData()},input:function(e){e.target.composing||(t.from=e.target.value)}}}),a("label",{staticClass:"mt-2 ms-2 me-3 mb-2"},[t._v(" To: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"to"}],staticClass:"form-control col-sm-2",attrs:{type:"date"},domProps:{value:t.to},on:{change:function(e){return t.getData()},input:function(e){e.target.composing||(t.to=e.target.value)}}}),a("label",{staticClass:" ms-6 mt-2 me-3"},[t._v(" Project: ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.work_project_id,expression:"work_project_id"}],staticClass:"form-control col-sm-2 mb-2 px-1",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.work_project_id=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._l(t.work_projects,(function(e){return a("option",{key:e.work_project_id,domProps:{value:e.work_project_id}},[t._v(" "+t._s(e.work_project_name)+" ")])}))],2),"A"==t.user.type?a("span",{staticClass:"ms-9 col-2"},[a("v-checkbox",{staticClass:"mt-1 custom-checkbox-label",attrs:{"hide-details":!0,label:"Detailed Info"},model:{value:t.detailedInfo,callback:function(e){t.detailedInfo=e},expression:"detailedInfo"}})],1):t._e()]),a("div",{staticClass:"row px-1 pb-3 pt-0 mb-1 no-print"},[a("label",{staticClass:"mt-2 col-1 "},[t._v(" Staffs: ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.staff_id,expression:"staff_id"}],staticClass:"form-control col-sm-2 mb-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.staff_id=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._l(t.staffs.filter((function(e){return e.special_staff==t.showSpecialStaffs})),(function(e){return a("option",{key:e.st_id,domProps:{value:e.st_id}},[t._v(" "+t._s(e.staff_name)+" ")])}))],2),a("span",{staticClass:"col-1"},[a("v-checkbox",{staticClass:"mt-1 custom-checkbox-label",attrs:{"true-value":"true","false-value":"false",label:"Specials"},model:{value:t.showSpecialStaffs,callback:function(e){t.showSpecialStaffs=e},expression:"showSpecialStaffs"}})],1),a("label",{staticClass:" ms-6 mt-2 me-3"},[t._v(" Employee: ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.emp_id,expression:"emp_id"}],staticClass:"form-control col-sm-2 mb-2 px-1",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.emp_id=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._l(t.employees,(function(e){return a("option",{key:"ee"+e.emp_id,domProps:{value:e.emp_id}},[t._v(" "+t._s(e.full_name)+" ")])}))],2),a("button",{staticClass:"btn btn-success ms-4 col-1",staticStyle:{height:"38px"},on:{click:function(e){return t.getData()}}},[a("i",{staticClass:"fa fa-search"})]),a("export-excel",{attrs:{data:t.excel_data}},[a("button",{staticClass:"ms-4 btn btn-success no-print"},[a("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[t._v(" mdi-microsoft-excel ")]),t._v(" Download Excel ")],1)])],1),a("div",{staticStyle:{color:"black","margin-top":"18px","margin-bottom":"18px"}},[a("span",[t._v("Employee work projects from "+t._s(t.from?t.from:"")+" to "+t._s(t.to?t.to:"")+" ")]),a("span",{staticStyle:{"margin-inline-start":"58px"}},[t._v(t._s(t.staff_id?"Staff: "+t.staffs.find((function(e){return e.st_id==t.staff_id})).staff_name:""))]),a("span",{staticStyle:{"margin-inline-start":"58px"}},[t._v(t._s(t.work_project_id?"Project: "+t.work_projects.find((function(e){return e.work_project_id==t.work_project_id})).work_project_name:""))]),a("span",{staticStyle:{"margin-inline-start":"58px"}},[t._v(t._s(t.emp_id?"Employee: "+t.employees.find((function(e){return e.emp_id==t.emp_id})).full_name:""))])]),a("table",{staticClass:"table table-bordered table-striped text-center ",staticStyle:{"page-break-inside":"always","font-size":"10.5pt !important",color:"black"}},[a("thead",[t.detailedInfo?a("tr",[a("th",{staticClass:"py-2"},[t._v("Employee")]),a("th",{staticClass:"py-2"},[t._v("Staff")]),a("th",{staticClass:"py-2"},[t._v("Project Supervisor")]),a("th",{staticClass:"py-2"},[t._v("Project")]),a("th",{staticClass:"py-2"},[t._v("Project Work")]),a("th",{staticClass:"py-2",staticStyle:{width:"12%"}},[t._v("Electricity Works")]),a("th",{staticClass:"py-2",staticStyle:{width:"10%"}},[t._v("Other Works")]),a("th",{staticClass:"py-2",staticStyle:{width:"9%"}},[t._v("Date")]),a("th",{staticClass:"py-2",staticStyle:{width:"9.9%"}},[t._v("Daily Salary")]),a("th",{staticClass:"py-2",staticStyle:{width:"9.9%"}},[t._v("Monthly Salary")]),a("th",{staticClass:"py-2"},[t._v("Food")]),a("th",{staticClass:"py-2",staticStyle:{width:"12%"}},[t._v("Salary Per Month")])]):a("tr",[a("th",{staticClass:"py-2"},[t._v("Employee")]),a("th",{staticClass:"py-2"},[t._v("Staff")]),a("th",{staticClass:"py-2"},[t._v("Project")]),a("th",{staticClass:"py-2",staticStyle:{width:"10%"}},[t._v("Working Days")]),a("th",{staticClass:"py-2"},[t._v("Overtime(h)")]),a("th",{staticClass:"py-2"},[t._v("Transport")]),a("th",{staticClass:"py-2",staticStyle:{width:"10%"}},[t._v("Daily Salary")]),a("th",{staticClass:"py-2",staticStyle:{width:"11%"}},[t._v("Monthly Salary")]),a("th",{staticClass:"py-2"},[t._v("Food")]),a("th",{staticClass:"py-2",staticStyle:{width:"12%"}},[t._v("Salary Per Month")])])]),a("tbody",[t.detailedInfo?t._l(t.rows,(function(e,s){return a("tr",{key:"rr"+s+"-"+(new Date).getTime()},[a("td",[t._v(t._s(e.employee_full_name))]),a("td",[t._v(t._s(e.staff_name))]),a("td",[t._v(t._s(e.project_supervisor))]),a("td",[t._v(t._s(e.work_project_name))]),a("td",[t._v(t._s(e.project_work))]),a("td",[t._v(t._s(e.electricity_works)+" ")]),a("td",[t._v(t._s(e.other_works))]),a("td",[t._v(t._s(new Date(e.work_date).toISOString().split("T")[0]))]),a("td",[t._v(t._s(e.daily_salary.toLocaleString())+" "+t._s("Daily"==e.salary_type?"IQD":"$"))]),a("td",[t._v(t._s(e.monthly_salary.toLocaleString())+" "+t._s("Daily"==e.salary_type?"IQD":"$"))]),a("td",[t._v(t._s(e.food_money.toLocaleString())+" "+t._s("Daily"==e.salary_type?"IQD":"$"))]),a("td",[t._v(t._s(e.other_expense.toLocaleString())+" "+t._s("Daily"==e.salary_type?"IQD":"$"))])])})):[t._l(t.rows.filter((function(t){return"Monthly"==t.salary_type})),(function(e,s){return a("tr",{key:"rrm"+s+"-"+(new Date).getTime()},[a("td",[t._v(t._s(e.employee_full_name))]),a("td",[t._v(t._s(e.staff_name))]),a("td",[t._v(t._s(e.work_project_name))]),a("td",[t._v(t._s(e.total_working_days_in_project))]),a("td",[t._v(t._s(e.total_overtime))]),a("td",[t._v(t._s((e.total_transport||0).toLocaleString())+" $")]),a("td",[t._v(t._s(e.daily_salary.toLocaleString())+" "+t._s("Daily"==e.salary_type?"IQD":"$"))]),a("td",[t._v(t._s(e.monthly_salary.toLocaleString())+" "+t._s("Daily"==e.salary_type?"IQD":"$"))]),a("td",[t._v(t._s(e.food_money.toLocaleString())+" "+t._s("Daily"==e.salary_type?"IQD":"$"))]),a("td",[t._v(t._s(e.other_expense.toLocaleString())+" "+t._s("Daily"==e.salary_type?"IQD":"$"))])])})),t._l(t.rows.filter((function(t){return"Daily"==t.salary_type})),(function(e,s){return a("tr",{key:"rrd"+s+"-"+(new Date).getTime()},[a("td",[t._v(t._s(e.employee_full_name))]),a("td",[t._v(t._s(e.staff_name))]),a("td",[t._v(t._s(e.work_project_name))]),a("td",[t._v(t._s(e.total_working_days_in_project))]),a("td",[t._v(t._s(e.total_overtime))]),a("td",[t._v(t._s((e.total_transport||0).toLocaleString())+" IQD")]),a("td",[t._v(t._s(e.daily_salary.toLocaleString())+" IQD")]),a("td",[t._v(t._s(e.monthly_salary.toLocaleString())+" IQD")]),a("td",[t._v(t._s(e.food_money.toLocaleString())+" IQD")]),a("td",[t._v(t._s(e.other_expense.toLocaleString())+" IQD")])])}))]],2)])])],1)])],1)},o=[],r=a("1ab6"),l={name:"WorkProjectsReport",data(){return{staff_id:null,staffs:[],showSpecialStaffs:"false",work_projects:[],work_project_id:null,employees:[],emp_id:null,month:(new Date).getMonth()+1,year:(new Date).getFullYear(),from:(new Date).toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0],rows:[],detailedInfo:!1,user:{username:"",type:""}}},beforeCreate(){Object(r["a"])("WorkProjectsReport")},created(){this.$http.post("/getLoggedInfo").then(({data:t})=>{this.user.username=t.username,this.user.type=t.type,"K"==this.user.type&&(this.detailedInfo=!0)}),this.$http.post("/staff/getData").then(({data:t})=>{this.staffs=t.filter(t=>"1"==t.show_staff).sort((t,e)=>t.staff_sort_code-e.staff_sort_code)})},mounted(){this.$http.post("/work_projects/getData").then(t=>{this.work_projects=t.data.filter(t=>"enabled"==t.work_project_status),this.getData()})},computed:{excel_data(){const t=[];return this.detailedInfo?t.push(...this.rows.map(t=>({Employee:t.employee_full_name,Staff:t.staff_name,"Project Supervisor":t.project_supervisor,Project:t.work_project_name,"Project Work":t.project_work,"Electricity Works":t.electricity_works,"Other Works":t.other_works,Date:t.work_date?new Date(t.work_date).toISOString().split("T")[0]:"","Daily Salary":t.daily_salary,"Monthly Salary":t.monthly_salary,Food:t.food_money,"Salary Per Month":t.other_expense}))):(t.push(...this.rows.filter(t=>"Monthly"==t.salary_type).map(t=>({Employee:t.employee_full_name,Staff:t.staff_name,Project:t.work_project_name,"Working Days":t.total_working_days_in_project,"Overtime(h)":t.total_overtime,Transport:t.total_transport,"Daily Salary":t.daily_salary,"Monthly Salary":t.monthly_salary,Food:t.food_money,"Salary Per Month":t.other_expense}))),t.push(...this.rows.filter(t=>"Daily"==t.salary_type).map(t=>({Employee:t.employee_full_name,Staff:t.staff_name,Project:t.work_project_name,"Working Days":t.total_working_days_in_project,"Overtime(h)":t.total_overtime,Transport:t.total_transport,"Daily Salary":t.daily_salary,"Monthly Salary":t.monthly_salary,Food:t.food_money,"Salary Per Month":t.other_expense})))),t}},methods:{getData(){this.$http.post("/work_projects/report",{from:new Date(this.from).toISOString().split("T")[0],to:new Date(this.to).toISOString().split("T")[0],st_id:this.staff_id||null,work_project_id:this.work_project_id||null,emp_id:this.emp_id||null,detailedInfo:this.detailedInfo}).then(t=>{this.rows=t.data})}},watch:{staff_id(t){this.employees=[],this.emp_id=null,this.getData(),t?this.$http.post("/employee/getEmployeeBystaff/"+this.staff_id+"/"+this.month+"/"+this.year).then(({data:t})=>{this.employees=t}):this.employees=[]},month(){this.getData()},year(){this.getData()},work_project_id(){this.getData()},emp_id(){this.getData()},detailedInfo(){this.getData()}}},i=l,n=(a("a959"),a("2877")),_=a("6544"),c=a.n(_),p=a("ac7c"),d=a("132d"),m=Object(n["a"])(i,s,o,!1,null,"479983c0",null);e["default"]=m.exports;c()(m,{VCheckbox:p["a"],VIcon:d["a"]})},"79e6":function(t,e,a){},a959:function(t,e,a){"use strict";a("79e6")}}]);
//# sourceMappingURL=chunk-66d2a942.150b29df.js.map