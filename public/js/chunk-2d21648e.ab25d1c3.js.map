{"version":3,"sources":["webpack:///./src/components/debtTransaction.vue?4be4","webpack:///src/components/debtTransaction.vue","webpack:///./src/components/debtTransaction.vue?7cb4","webpack:///./src/components/debtTransaction.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","_v","_s","directives","name","rawName","value","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","st_id","multiple","_l","staff","key","domProps","staff_name","employee","emp_id","getEmployeeDebtInfo","full_name","clearTransaction","_e","clearEmployee","debt","toLocaleString","salary_type","transactionHeader","debts","scopedSlots","_u","fn","ref","item","index","transactionAmount","_f","transactionType","Date","transactionDate","toISOString","split","getSingleTransaction","deleteTransaction","dtID","singleTransaction","composing","$set","_q","updateTransaction","addTransaction","staticRenderFns","data","staffs","employees","amount","note","beforeCreate","auth","created","catch","err","showError","methods","then","computed","text","align","sortable","filters","typeFilter","Plus","Minus","watch","component","VBtn","VDataTable","VIcon"],"mappings":"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","file":"js/chunk-2d21648e.ab25d1c3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"wrapper\"}},[_c('navbar',{staticClass:\"animate__animated animate__fadeInLeft\",staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"nav\"}}),_c('div',{staticClass:\"d-flex flex-column animate__animated animate__fadeInRight\",staticStyle:{\"display\":\"none !important\"},attrs:{\"id\":\"content-wrapper\"}},[_c('div',{attrs:{\"id\":\"content\"}},[_c('header-btn'),_c('div',{staticClass:\"container-fluid\"},[_c('h3',{staticClass:\"text-dark mb-4 multi-language\"},[_vm._v(_vm._s('Employee Debts'))]),_c('hr'),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-lg-1 col-md-1  mt-2\"},[_vm._v(\" Staffs: \")]),_c('div',{staticClass:\"col-12 col-lg-3 col-md-3\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.st_id),expression:\"st_id\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.st_id=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}}),_vm._l((_vm.staffs),function(staff){return _c('option',{key:staff.st_id,domProps:{\"value\":staff.st_id}},[_vm._v(\" \"+_vm._s(staff.staff_name)+\" \")])})],2)])]),_c('div',{staticClass:\"row mt-2\"},_vm._l((_vm.employees),function(employee){return _c('div',{key:employee.emp_id,staticClass:\"col-12 col-lg-3 col-md-3 mb-2\"},[_c('button',{staticClass:\"btn btn-primary btn-block\",on:{\"click\":function($event){return _vm.getEmployeeDebtInfo(employee.emp_id)}}},[_vm._v(\" \"+_vm._s(employee.full_name)+\" \")])])}),0),_c('hr'),_c('div',{staticClass:\"my-1 text-dark\"},[_vm._v(\" Employee: \"+_vm._s(_vm.full_name)+\" \"),(_vm.full_name)?_c('button',{staticClass:\"btn btn-success btn-sm mx-3\",attrs:{\"data-toggle\":\"modal\",\"data-target\":\"#mdl_transaction\"},on:{\"click\":function($event){return _vm.clearTransaction();}}},[_c('i',{staticClass:\"fa fa-plus\"})]):_vm._e(),(_vm.full_name)?_c('button',{staticClass:\"btn btn-info btn-sm mx-3\",on:{\"click\":function($event){return _vm.clearEmployee();}}},[_c('i',{staticClass:\"fa fa-broom\"})]):_vm._e()]),(_vm.debt < 0)?_c('div',{staticClass:\"my-1 alert alert-warning\"},[_vm._v(\" The Employee must retrive: \"+_vm._s((_vm.debt * -1).toLocaleString())+\" \"+_vm._s(_vm.salary_type == 'Daily' ? 'IQD': '$')+\" \")]):_c('div',{staticClass:\"my-1 alert alert-primary\"},[_vm._v(\" The Company must give: \"+_vm._s((_vm.debt).toLocaleString())+\" \"+_vm._s(_vm.salary_type == 'Daily' ? 'IQD': '$')+\" \")]),_c('v-data-table',{staticClass:\"text-center\",attrs:{\"headers\":_vm.transactionHeader,\"items\":_vm.debts,\"foote-props\":{'items-per-page-options': [15, 20]}},scopedSlots:_vm._u([{key:\"item\",fn:function(ref){\nvar item = ref.item;\nvar index = ref.index;\nreturn [_c('tr',[_c('td',[_vm._v(\" \"+_vm._s(index + 1)+\" \")]),_c('td',[_vm._v(\" \"+_vm._s((item.transactionAmount > 0 ? item.transactionAmount : item.transactionAmount * -1).toLocaleString())+\" \"+_vm._s(_vm.salary_type == \"Daily\" ? \"IQD\" : \"$\")+\" \")]),_c('td',[_vm._v(\" \"+_vm._s(_vm._f(\"typeFilter\")(item.transactionType))+\" \")]),_c('td',[_vm._v(\" \"+_vm._s(new Date(item.transactionDate).toISOString().split('T')[0])+\" \")]),_c('td',[_c('v-btn',{attrs:{\"color\":\"primary\",\"icon\":\"\",\"data-toggle\":\"modal\",\"data-target\":\"#mdl_transaction\"},on:{\"click\":function($event){return _vm.getSingleTransaction(item)}}},[_c('v-icon',[_vm._v(\" mdi-pencil \")])],1),_c('v-btn',{attrs:{\"color\":\"error\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.deleteTransaction(item.dtID)}}},[_c('v-icon',[_vm._v(\" mdi-delete \")])],1)],1)])]}}])})],1)],1)]),_c('change-pass'),_c('div',{staticClass:\"modal\",attrs:{\"id\":\"mdl_transaction\"}},[_c('div',{staticClass:\"modal-dialog modal-lg\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"mt-2\"},[_vm._v(\" Transaction Info \")]),_c('button',{staticClass:\"float-right btn btn-danger\",attrs:{\"data-dismiss\":\"modal\"},on:{\"click\":function($event){return _vm.clearTransaction()}}},[_vm._v(\" Ã— \")])]),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row px-2 py-3\"},[_c('div',{staticClass:\"col-1 pt-2\"},[_vm._v(\" Amount: \")]),_c('div',{staticClass:\"col-12 col-md-11 col-lg-11\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.singleTransaction.amount),expression:\"singleTransaction.amount\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.singleTransaction.amount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.singleTransaction, \"amount\", $event.target.value)}}})]),_c('div',{staticClass:\"form-check col-12 my-3\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.singleTransaction.transactionType),expression:\"singleTransaction.transactionType\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"radio\",\"name\":\"radio\",\"value\":\"Minus\"},domProps:{\"checked\":_vm._q(_vm.singleTransaction.transactionType,\"Minus\")},on:{\"change\":function($event){return _vm.$set(_vm.singleTransaction, \"transactionType\", \"Minus\")}}}),_c('label',{staticClass:\"form-check-label\"},[_vm._v(\" Give to Employee \")])]),_c('div',{staticClass:\"form-check col-12 my-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.singleTransaction.transactionType),expression:\"singleTransaction.transactionType\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"radio\",\"name\":\"radio\",\"value\":\"Plus\"},domProps:{\"checked\":_vm._q(_vm.singleTransaction.transactionType,\"Plus\")},on:{\"change\":function($event){return _vm.$set(_vm.singleTransaction, \"transactionType\", \"Plus\")}}}),_c('label',{staticClass:\"form-check-label\"},[_vm._v(\" Retrive from Employee \")])]),_c('div',{staticClass:\"col-1 pt-2 mt-3\"},[_vm._v(\" Note: \")]),_c('div',{staticClass:\"col-12 col-md-11 col-lg-11 mt-3\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.singleTransaction.note),expression:\"singleTransaction.note\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.singleTransaction.note)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.singleTransaction, \"note\", $event.target.value)}}})]),(!_vm.singleTransaction.dtID)?_c('button',{staticClass:\"btn btn-primary btn-block mt-1\",on:{\"click\":function($event){return _vm.addTransaction()}}},[_vm._v(\" Add \")]):_c('button',{staticClass:\"btn btn-warning btn-block mt-1\",on:{\"click\":function($event){return _vm.updateTransaction()}}},[_vm._v(\" Save changes \")])])])])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"wrapper\">\n        <navbar id=\"nav\" class=\"animate__animated animate__fadeInLeft\"  style=\"display: none;\"/>\n        <div class=\"d-flex flex-column animate__animated animate__fadeInRight\" id=\"content-wrapper\" style=\"display: none !important;\">\n            <div id=\"content\">\n                <header-btn/>\n                <div class=\"container-fluid\">\n                    <h3 class=\"text-dark mb-4 multi-language\">{{ 'Employee Debts' }}</h3>\n                    <hr>\n                    <div class=\"row\">\n                        <div class=\"col-12 col-lg-1 col-md-1  mt-2\">\n                            Staffs:\n                        </div>\n                        <div class=\"col-12 col-lg-3 col-md-3\">\n                            <select class=\"form-control\" v-model=\"st_id\">\n                                <option value=\"\"></option>\n                                <option v-for=\"staff in staffs\" :key=\"staff.st_id\" :value=\"staff.st_id\">\n                                    {{ staff.staff_name }}\n                                </option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row mt-2\">\n                        <div class=\"col-12 col-lg-3 col-md-3 mb-2\" v-for=\"employee in employees\" :key=\"employee.emp_id\">\n                            <button class=\"btn btn-primary btn-block\" @click=\"getEmployeeDebtInfo(employee.emp_id)\"> {{ employee.full_name }} </button>\n                        </div>\n                    </div>\n                    <hr>\n                    <div class=\"my-1 text-dark\"> Employee: {{ full_name }}\n                        &nbsp;\n                        <button class=\"btn btn-success btn-sm mx-3\" v-if=\"full_name\" data-toggle=\"modal\" data-target=\"#mdl_transaction\" @click=\"clearTransaction();\"> <i class=\"fa fa-plus\"></i> </button>\n                        <button class=\"btn btn-info btn-sm mx-3\" v-if=\"full_name\" @click=\"clearEmployee();\"> <i class=\"fa fa-broom\"></i> </button>\n                    </div>\n                    <div class=\"my-1 alert alert-warning\" v-if=\"debt < 0\"> The Employee must retrive: {{ (debt * -1).toLocaleString() }} {{ salary_type == 'Daily' ? 'IQD': '$' }} </div>\n                    <div class=\"my-1 alert alert-primary\" v-else> The Company must give: {{ (debt).toLocaleString() }} {{ salary_type == 'Daily' ? 'IQD': '$' }} </div>\n                    <v-data-table :headers=\"transactionHeader\" :items=\"debts\" :foote-props=\"{'items-per-page-options': [15, 20]}\" class=\"text-center\">\n                        <template v-slot:item=\"{item, index}\">\n                            <tr>\n                                <td> {{ index + 1 }} </td>\n                                <td> {{ (item.transactionAmount > 0 ? item.transactionAmount : item.transactionAmount * -1).toLocaleString() }} {{ salary_type == \"Daily\" ? \"IQD\" : \"$\" }} </td>\n                                <td> {{ item.transactionType | typeFilter }} </td>\n                                <td> {{ new Date(item.transactionDate).toISOString().split('T')[0] }} </td>\n                                <td>\n                                    <v-btn color=\"primary\" icon data-toggle=\"modal\" data-target=\"#mdl_transaction\" @click=\"getSingleTransaction(item)\"> <v-icon> mdi-pencil </v-icon> </v-btn>\n                                    <v-btn color=\"error\" icon @click=\"deleteTransaction(item.dtID)\"> <v-icon> mdi-delete </v-icon> </v-btn>\n                                </td>\n                            </tr>\n                        </template>\n                    </v-data-table>\n                </div>\n            </div>\n        </div>\n\n        <!-- Modals -->\n        <change-pass/>\n\n        <div class=\"modal\" id=\"mdl_transaction\">\n            <div class=\"modal-dialog modal-lg\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"mt-2\"> Transaction Info </h5>\n                        <button class=\"float-right btn btn-danger\" data-dismiss=\"modal\" @click=\"clearTransaction()\"> &times; </button>\n                    </div>\n                    <div class=\"modal-content\">\n                        <div class=\"container-fluid\">\n                            <div class=\"row px-2 py-3\">\n                                <div class=\"col-1 pt-2\">\n                                    Amount:\n                                </div>\n                                <div class=\"col-12 col-md-11 col-lg-11\">\n                                    <input type=\"number\" class=\"form-control\" v-model=\"singleTransaction.amount\">\n                                </div>\n                                <div class=\"form-check col-12 my-3\">\n                                    <input class=\"form-check-input\" type=\"radio\" name=\"radio\" value=\"Minus\" v-model=\"singleTransaction.transactionType\">\n                                    <label class=\"form-check-label\">\n                                        Give to Employee\n                                    </label>\n                                </div>\n                                <div class=\"form-check col-12 my-1\">\n                                    <input class=\"form-check-input\" type=\"radio\" name=\"radio\" value=\"Plus\" v-model=\"singleTransaction.transactionType\">\n                                    <label class=\"form-check-label\">\n                                        Retrive from Employee\n                                    </label>\n                                </div>\n                                <div class=\"col-1 pt-2 mt-3\">\n                                    Note:\n                                </div>\n                                <div class=\"col-12 col-md-11 col-lg-11 mt-3\">\n                                    <textarea type=\"number\" class=\"form-control\" v-model=\"singleTransaction.note\"> </textarea>\n                                </div>\n                                <button class=\"btn btn-primary btn-block mt-1\" @click=\"addTransaction()\" v-if=\"!singleTransaction.dtID\"> Add </button>\n                                <button class=\"btn btn-warning btn-block mt-1\" v-else @click=\"updateTransaction()\"> Save changes </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div> \n\n    </div>\n</template>\n\n<script>\nimport auth from \"../auth\"\nimport showError from \"../showError\"\nexport default {\n    data() {\n        return {\n            staffs: [],\n            employees: [],\n            emp_id: [],\n            st_id: null,\n            full_name: null,\n            salary_type: 'Daily',\n            debts: [],\n            singleTransaction: {\n                dtID: null,\n                amount: 0,\n                transactionType: null,\n                note: null\n            }\n        }\n    },\n    beforeCreate() {\n        auth(\"attendance\");\n    },\n    created() {\n        this.$http.post('/staff/getData').then(({data})=>{\n            this.staffs = data.sort((a, b) => a.staff_sort_code - b.staff_sort_code)\n        }).catch((err)=>{\n            showError(err);\n        });\n    },\n    methods: {\n        clearTransaction() {\n            this.singleTransaction.dtID = null;\n            this.singleTransaction.amount = 0;\n            this.singleTransaction.transactionType = null;\n            this.singleTransaction.note = null;\n        },\n        clearEmployee() {\n            this.emp_id = null;\n            this.full_name = null;\n            this.salary_type = 'Daily';\n            this.debts = [];\n        },\n        getEmployeeDebtInfo(emp_id) {\n            const employee = this.employees.find(obj => obj.emp_id == emp_id);\n            this.emp_id = emp_id;\n            this.full_name = employee.full_name;\n            this.salary_type = employee.salary_type;\n            this.$http.get('/employee/getEmployeeTransaction/' + emp_id).then(({data}) => {\n                this.debts = data;\n            });\n        },\n        addTransaction() {\n            if(this.singleTransaction.amount > 0 && this.singleTransaction.transactionType) {\n                this.$http.post('/employee/addDebtTransaction', {\n                    emp_id: this.emp_id,\n                    transactionAmount: this.singleTransaction.amount,\n                    transactionType: this.singleTransaction.transactionType,\n                    note: this.singleTransaction.note\n                }).then(({data}) => {\n                    this.debts.unshift({\n                        dtID: data.dtID,\n                        emp_id: this.emp_id,\n                        transactionAmount: this.singleTransaction.transactionType == 'Minus' ? this.singleTransaction.amount * -1 : this.singleTransaction.amount,\n                        transactionType: this.singleTransaction.transactionType,\n                        transactionDate: new Date().toISOString().split('T')[0],\n                        note: this.singleTransaction.note || null\n                    });\n                    this.clearTransaction();\n                });\n            } else {\n                this.$alert('Please fill all informations correctly', '', 'warning');\n            }\n        },\n        getSingleTransaction(transaction) {\n            this.singleTransaction.dtID = transaction.dtID;\n            this.singleTransaction.amount = transaction.transactionType == 'Plus' ? transaction.transactionAmount : transaction.transactionAmount * -1;\n            this.singleTransaction.transactionType = transaction.transactionType;\n            this.singleTransaction.note = transaction.note;\n        },\n        updateTransaction() {\n            this.$http.patch('/employee/updateDebtTransaction/' + this.singleTransaction.dtID, {\n                transactionAmount: this.singleTransaction.amount,\n                transactionType: this.singleTransaction.transactionType,\n                note: this.singleTransaction.note\n            }).then(() => {\n                let index = this.debts.findIndex(obj => obj.dtID == this.singleTransaction.dtID);\n                this.debts[index].transactionAmount = this.singleTransaction.transactionType == 'Minus' ? this.singleTransaction.amount * -1 : this.singleTransaction.amount;\n                this.debts[index].transactionType = this.singleTransaction.transactionType;\n                this.debts[index].note = this.singleTransaction.note;\n                this.$alert('Success', '', 'success');\n            });\n        },\n        deleteTransaction(dtID) {\n            this.$confirm('Are you sure delete this data ?', '', 'question').then(() => {\n                this.$http.delete('/employee/deleteDebtTransaction/' + dtID).then(() => {\n                    this.debts = this.debts.filter(obj => obj.dtID != dtID);\n                });\n            });\n        }\n    },\n    computed: {\n        debt() {\n            return this.debts.reduce((acc, n) => acc + Number(n.transactionAmount), 0);\n        },\n        transactionHeader() {\n            return [\n                { text: '#', align: 'center', sortable: false },\n                { text: 'Amount', align: 'center', sortable: false },\n                { text: 'Type', align: 'center', sortable: false },\n                { text: 'Date', align: 'center', sortable: false },\n                { text: 'Actions', align: 'center', sortable: false },\n            ]\n        }\n    },\n    filters: {\n        typeFilter(value) {\n            return {\n                Plus: 'Retrieved from Employee',\n                Minus: 'Gived to Employee',\n            }[value]\n        }\n    },\n    watch: {\n        st_id(value) {\n            if(value) {\n                this.$http.post('/employee/getEmployeeBystaff/' + value).then(({data}) => {\n                    this.employees = data;\n                });\n            } else {\n                this.employees = [];\n            }\n        }\n    }\n}\n</script>\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./debtTransaction.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./debtTransaction.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./debtTransaction.vue?vue&type=template&id=5872d568&\"\nimport script from \"./debtTransaction.vue?vue&type=script&lang=js&\"\nexport * from \"./debtTransaction.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VDataTable,VIcon})\n"],"sourceRoot":""}