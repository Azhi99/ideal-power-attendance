(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d497a65"],{"02e8":function(t,e,a){},"14c4":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrapper"}},[a("navbar",{staticClass:"animate__animated animate__fadeInLeft",staticStyle:{display:"none"},attrs:{id:"nav"}}),a("div",{staticClass:"d-flex flex-column animate__animated animate__fadeInRight",staticStyle:{display:"none !important"},attrs:{id:"content-wrapper"}},[a("div",{attrs:{id:"content"}},[a("header-btn"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row no-print"},["A"==t.user.role?a("div",{staticClass:"col-1"},[a("button",{staticClass:"btn btn-success btn-block",attrs:{"data-toggle":"modal","data-target":"#mdlLoan"},on:{click:function(e){t.clear_loan(),t.employee_status_filter="1"}}},[t._v(" Add ")])]):t._e(),"A"==t.user.role||"K"==t.user.role?a("div",{staticClass:"col-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.archived_status,expression:"archived_status"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.archived_status=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"all"}},[t._v(" All ")]),a("option",{attrs:{value:"unarchived"}},[t._v(" Unarchived ")]),a("option",{attrs:{value:"archived"}},[t._v(" Archived ")])])]):t._e(),"A"==t.user.role||"K"==t.user.role?a("div",{staticClass:"col-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.type_filter,expression:"type_filter"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type_filter=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"all"}},[t._v(" All ")]),a("option",{attrs:{value:"loan"}},[t._v(" Loan ")]),a("option",{attrs:{value:"accomodation"}},[t._v(" Accomodation ")]),a("option",{attrs:{value:"expense"}},[t._v(" Expense ")]),a("option",{attrs:{value:"fine"}},[t._v(" Fine ")]),a("option",{attrs:{value:"food"}},[t._v(" Food ")]),a("option",{attrs:{value:"transport"}},[t._v(" Transport ")])])]):t._e(),"A"==t.user.role?a("span",{staticClass:"col-1"},[a("v-checkbox",{staticClass:"mt-1 custom-checkbox-label",attrs:{"true-value":"true","false-value":"false",label:"Specials"},model:{value:t.showSpecialStaffs,callback:function(e){t.showSpecialStaffs=e},expression:"showSpecialStaffs"}})],1):t._e(),"A"==t.user.role?a("span",{staticClass:"ms-6",staticStyle:{"margin-top":"10px"}},[t._v(" Month: ")]):t._e(),"A"==t.user.role||"K"==t.user.role?a("div",{staticClass:"col-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.month,expression:"month"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.month=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._l(12,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2)]):t._e(),"A"==t.user.role?a("span",{staticClass:"ms-6",staticStyle:{"margin-top":"10px"}},[t._v(" Year: ")]):t._e(),"A"==t.user.role||"K"==t.user.role?a("div",{staticClass:"col-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"form-control",attrs:{type:"number",min:"2020"},domProps:{value:t.year},on:{input:function(e){e.target.composing||(t.year=e.target.value)}}})]):t._e(),"A"==t.user.role?a("div",{staticClass:"col-1"},[a("button",{staticClass:"btn btn-primary btn-block",on:{click:function(e){return t.print_all()}}},[t._v(" Print ")])]):t._e(),a("div",{staticClass:"col-3"},[a("v-autocomplete",{staticClass:"col-3",attrs:{outlined:"",dense:"","hide-details":!0,items:t.employees_to_filter,"item-text":"full_name","item-value":"emp_id",clearable:""},model:{value:t.emp_id_filter,callback:function(e){t.emp_id_filter=e},expression:"emp_id_filter"}})],1)]),"A"==t.user.role||"K"==t.user.role?a("v-data-table",{staticClass:"mt-3 no-print",attrs:{headers:t.headers,items:t.rows.filter((function(e){return!t.emp_id_filter||e.emp_id==t.emp_id_filter})),"footer-props":{"items-per-page-options":[15,20,25,-1]}},scopedSlots:t._u([{key:"item.archived",fn:function(e){var a=e.item;return[t._v(" "+t._s("archived"==a.archived?"Archived":"Unarchived")+" ")]}},{key:"item.amount",fn:function(e){var o=e.item;return[a("span",{class:{"text-danger":o.amount<0}},[t._v(" "+t._s(o.amount.toLocaleString())+" "+t._s("Monthly"==o.salary_type?"$":"IQD.")+" ")])]}},{key:"item.datetime_create",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.datetime_create&&t.isValidDate(a.datetime_create)?new Date(a.datetime_create).toISOString().split("T")[0]:"")+" "+t._s(a.datetime_create&&t.isValidDate(a.datetime_create)?new Date(a.datetime_create).toLocaleTimeString([],{timeZone:"America/Danmarkshavn",hour:"2-digit",minute:"2-digit"}):"")+" ")]}},{key:"item.la_date",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.la_date&&t.isValidDate(a.la_date)?new Date(a.la_date).toISOString().split("T")[0]:"")+" ")]}},{key:"item.la_id",fn:function(e){var o=e.item;return[a("v-btn",{attrs:{icon:"",color:"success","data-toggle":"modal","data-target":"#mdlView"},on:{click:function(e){t.employee_status_filter=null,t.getSingleLoanAccomodation(o)}}},[a("v-icon",{attrs:{size:"23"}},[t._v(" mdi-eye ")])],1),"A"==t.user.role?a("v-btn",{attrs:{icon:"",color:"primary","data-toggle":"modal","data-target":"#mdlLoan"},on:{click:function(e){t.employee_status_filter=null,t.getSingleLoanAccomodation(o)}}},[a("v-icon",{attrs:{size:"23"}},[t._v(" mdi-pencil ")])],1):t._e(),"A"==t.user.role?a("v-btn",{attrs:{icon:"",color:"error"},on:{click:function(e){return t.delete_list(o.la_id)}}},[a("v-icon",[t._v(" mdi-delete ")])],1):t._e()]}}],null,!0)}):a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered table-striped text-center text-dark"},[a("thead",[a("tr",[a("th",[t._v(" Employee ")]),a("th",[t._v(" Staff ")]),a("th",[t._v(" Type ")]),a("th",[t._v(" Amount ")]),a("th",[t._v(" User ")]),a("th",[t._v(" Date - Time ")]),a("th",[t._v(" Actions ")])])]),a("tbody",t._l(t.rows.filter((function(e){return!t.emp_id_filter||e.emp_id==t.emp_id_filter})),(function(e,o){return a("tr",{key:o},[a("td",[t._v(" "+t._s(e.employee_full_name)+" ")]),a("td",[t._v(" "+t._s(e.staff_name)+" ")]),a("td",[t._v(" "+t._s(e.la_type)+" ")]),a("td",{class:{"text-danger":e.amount<0}},[t._v(" "+t._s(e.amount.toLocaleString())+" "+t._s("Monthly"==e.salary_type?"$":"IQD.")+" ")]),a("td",[t._v(" "+t._s(e.user)+" ")]),a("td",[t._v(" "+t._s(e.datetime_create&&t.isValidDate(e.datetime_create)?new Date(e.datetime_create).toISOString().split("T")[0]:"")+" "+t._s(e.datetime_create&&t.isValidDate(e.datetime_create)?new Date(e.datetime_create).toLocaleTimeString([],{timeZone:"America/Danmarkshavn",hour:"2-digit",minute:"2-digit"}):"")+" ")]),a("td",[a("v-btn",{attrs:{icon:"",color:"success","data-toggle":"modal","data-target":"#mdlView"},on:{click:function(a){return t.getSingleLoanAccomodation(e)}}},[a("v-icon",{attrs:{size:"23"}},[t._v(" mdi-eye ")])],1)],1)])})),0)])])],1),a("hr",{staticClass:"no-print"}),"A"==t.user.role?a("table",{staticClass:"table table-bordered  text-center text-dark table-only-print"},[t._m(0),a("tbody",[t._l(Array.from(new Set(t.all_rows.filter((function(e){return e.special_staff==t.showSpecialStaffs})).filter((function(e){return!t.emp_id_filter||e.emp_id==t.emp_id_filter})).map((function(t){return t.st_id})))),(function(e,o){return[a("tr",{key:"ss"+o},[a("td",{staticClass:"text-start",staticStyle:{"background-color":"#EBEBF0 !important",color:"blue"},attrs:{colspan:"4"}},[t._v(" "+t._s(t.staffs.find((function(t){return t.st_id==e})).staff_name)+" ")])]),t._l(Array.from(t.removeDuplicateObjects(t.all_rows.filter((function(t){return t.st_id==e})).map((function(t){return{emp_id:t.emp_id,la_id:t.la_id}})))),(function(e,o){return[a("tr",{key:"se"+e.emp_id+e.la_id+o},[a("td",{staticClass:"text-start",staticStyle:{"background-color":"#EBEBF0 !important",color:"black","font-weight":"500"},attrs:{colspan:"4"}},[t._v(" "+t._s(t.all_rows.find((function(t){return t.emp_id==e.emp_id})).employee_full_name)+" ")])]),a("tr",{key:"sn"+e.emp_id+e.la_id+o+1},[a("td",{staticClass:"text-start",staticStyle:{"background-color":"#EBEBF0 !important",color:"black","font-weight":"500","white-space":"pre","font-size":"11pt"},attrs:{colspan:"4"}},[t._v(t._s(t.all_rows.find((function(t){return t.emp_id==e.emp_id&&t.la_id==e.la_id})).note))])]),t._l(t.all_rows.filter((function(t){return t.emp_id==e.emp_id&&t.la_id==e.la_id})),(function(e,o){return a("tr",{key:"data"+e.la_id+o},[a("td",[t._v(" "+t._s(e.la_type)+" ")]),a("td",{class:{"text-danger":e.amount<0}},[t._v(" "+t._s(e.amount.toLocaleString())+" "+t._s("Monthly"==e.salary_type?"$":"IQD.")+" ")]),a("td",[t._v(" "+t._s(e.month)+" ")]),a("td",[t._v(" "+t._s(e.year)+" ")])])}))]}))]}))],2)]):t._e()],1)]),a("div",{staticClass:"modal text-dark animate__animated animate__fadeInDown animate__faster",attrs:{id:"mdlLoan"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){return t.clear_loan()}}},[t._v("×")]),a("h5",{staticClass:"mt-2"},[t._v(" Loan / Accomodation / Expense ")])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 mt-2"},[t._v(" Staffs: ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.loan_accomodation.staff_id,expression:"loan_accomodation.staff_id"}],staticClass:"form-control col-sm-8 mb-2",attrs:{id:"staff-select"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.loan_accomodation,"staff_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}}),t._l(t.staffs.filter((function(e){return"1"==e.show_staff&&e.special_staff==t.showSpecialStaffs})),(function(e){return a("option",{key:e.st_id,domProps:{value:e.st_id}},[t._v(" "+t._s(e.staff_name)+" ")])}))],2)]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 mt-2"},[t._v(" Employee: ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.loan_accomodation.emp_id,expression:"loan_accomodation.emp_id"}],staticClass:"form-control col-sm-8 mb-2",attrs:{id:"employee-select"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.loan_accomodation,"emp_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}}),t._l(t.employees.filter((function(e){return!t.employee_status_filter||e.active_status==t.employee_status_filter})),(function(e){return a("option",{key:e.emp_id,domProps:{value:e.emp_id}},[t._v(" "+t._s(e.full_name)+" ")])}))],2),a("label",{staticClass:"col-sm-2 mt-1"},[t._v(" "+t._s(t._f("country_filter")(t.region))+" ")])]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 mt-2"},[t._v(" Type: ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.loan_accomodation.la_type,expression:"loan_accomodation.la_type"}],staticClass:"form-control col-sm-8 mb-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.loan_accomodation,"la_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"loan"}},[t._v(" Loan ")]),a("option",{attrs:{value:"accomodation"}},[t._v(" Accomodation ")]),a("option",{attrs:{value:"expense"}},[t._v(" Expense ")]),a("option",{attrs:{value:"fine"}},[t._v(" Fine ")]),a("option",{attrs:{value:"food"}},[t._v(" Food ")]),a("option",{attrs:{value:"transport"}},[t._v(" Transport ")])])]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 mt-2"},[t._v(" Salary type: ")]),a("label",{staticClass:"col-sm-8 mt-2"},[t._v(" "+t._s(t.loan_accomodation.salary_type)+" ")])]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 mt-2"},[t._v(" Amount: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.loan_accomodation.amount,expression:"loan_accomodation.amount"}],staticClass:"form-control col-sm-8 mb-2",attrs:{type:"number"},domProps:{value:t.loan_accomodation.amount},on:{input:function(e){e.target.composing||t.$set(t.loan_accomodation,"amount",e.target.value)}}}),a("label",{staticClass:"col-sm-1 mt-2"},[t._v(" "+t._s(t.loan_accomodation.emp_id?"Monthly"==t.employees.find((function(e){return e.emp_id==t.loan_accomodation.emp_id})).salary_type?"$":"IQD.":"")+" ")])]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-12 mt-2"},[t._v(" Remain: "),a("span",{staticClass:"ml-14"},[t._v(" ( "+t._s((Number(t.loan_accomodation.amount)-Number(t.list.reduce((function(t,e){return t+Number(e.amount)}),0))).toLocaleString())+" ) ")])])]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 mt-2"},[t._v(" Date: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.loan_accomodation.la_date,expression:"loan_accomodation.la_date"}],staticClass:"form-control col-sm-8 mb-2",attrs:{type:"date"},domProps:{value:t.loan_accomodation.la_date},on:{input:function(e){e.target.composing||t.$set(t.loan_accomodation,"la_date",e.target.value)}}})]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 mt-2"},[t._v(" Archived: ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.loan_accomodation.archived,expression:"loan_accomodation.archived"}],staticClass:"form-control col-sm-8 mb-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.loan_accomodation,"archived",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"unarchived"}},[t._v(" Unarchived ")]),a("option",{attrs:{value:"archived"}},[t._v(" Archived ")])])]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-2 mt-2"},[t._v(" Note: ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.loan_accomodation.note,expression:"loan_accomodation.note"}],staticClass:"form-control col-sm-10 mb-2",attrs:{rows:"3"},domProps:{value:t.loan_accomodation.note},on:{input:function(e){e.target.composing||t.$set(t.loan_accomodation,"note",e.target.value)}}})]),a("div",{staticClass:"row"},[a("button",{staticClass:"btn btn-success col-sm-2 mt-2",on:{click:function(e){return t.push_item_list()}}},[a("v-icon",{attrs:{color:"white"}},[t._v(" mdi-plus ")])],1)]),a("hr"),t._m(1),t._l(t.list,(function(e,o){return a("div",{key:"l"+o,staticClass:"row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"item.amount"}],staticClass:"form-control col-sm-3 mb-2",domProps:{value:e.amount},on:{change:function(a){return t.set_amount(e.lad_id||null,e.amount)},input:function(a){a.target.composing||t.$set(e,"amount",a.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:e.month,expression:"item.month"}],staticClass:"form-control col-sm-3 mb-2",on:{change:[function(a){var o=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"month",a.target.multiple?o:o[0])},function(a){return t.set_month(e.lad_id||null,e.month)}]}},[a("option",{attrs:{value:""}}),a("option",{attrs:{value:"1"}},[t._v(" 1 ")]),a("option",{attrs:{value:"2"}},[t._v(" 2 ")]),a("option",{attrs:{value:"3"}},[t._v(" 3 ")]),a("option",{attrs:{value:"4"}},[t._v(" 4 ")]),a("option",{attrs:{value:"5"}},[t._v(" 5 ")]),a("option",{attrs:{value:"6"}},[t._v(" 6 ")]),a("option",{attrs:{value:"7"}},[t._v(" 7 ")]),a("option",{attrs:{value:"8"}},[t._v(" 8 ")]),a("option",{attrs:{value:"9"}},[t._v(" 9 ")]),a("option",{attrs:{value:"10"}},[t._v(" 10 ")]),a("option",{attrs:{value:"11"}},[t._v(" 11 ")]),a("option",{attrs:{value:"12"}},[t._v(" 12 ")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"item.year"}],staticClass:"form-control col-sm-3 mb-2",attrs:{type:"number"},domProps:{value:e.year},on:{change:function(a){return t.set_year(e.lad_id||null,e.year)},input:function(a){a.target.composing||t.$set(e,"year",a.target.value)}}}),a("v-btn",{staticClass:"col-sm-3 mb-2 text-center",attrs:{color:"error"},on:{click:function(e){return t.delete_item_list(o)}}},[a("v-icon",[t._v(" mdi-delete ")])],1)],1)})),a("div",{staticClass:"row"},[t.loan_accomodation.la_id?a("button",{staticClass:"btn btn-warning btn-block mx-2 mt-8",on:{click:function(e){return t.updateList()}}},[t._v(" Update "),a("v-icon",{attrs:{color:"white"}},[t._v(" mdi-content-save ")])],1):a("button",{staticClass:"btn btn-success btn-block mx-2 mt-8",on:{click:function(e){return t.addList()}}},[t._v(" Add List "),a("v-icon",{attrs:{color:"white"}},[t._v(" mdi-plus ")])],1)])],2)])])]),a("div",{staticClass:"modal text-dark animate__animated animate__fadeInDown animate__faster",attrs:{id:"mdlView"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(e){return t.clear_loan()}}},[t._v("×")]),a("h5",{staticClass:"mt-2"},[t._v(" Loan / Accomodation ")])]),a("div",{staticClass:"modal-body"},[t._v(" Employee: "+t._s(t.employee_full_name)+" "),a("br"),a("br"),t._v(" Country: "+t._s(t._f("country_filter")(t.region))+" "),a("br"),a("br"),t._v(" Staff: "+t._s(t.loan_accomodation.staff_id?t.staffs.find((function(e){return e.st_id==t.loan_accomodation.staff_id})).staff_name:"")+" "),a("br"),a("br"),t._v(" Type: "+t._s(t.loan_accomodation.la_type)+" "),a("br"),a("br"),t._v(" Total: "),a("span",{class:{"text-danger":t.loan_accomodation.amount<0}},[t._v(" "+t._s((t.loan_accomodation.amount>0?t.loan_accomodation.amount:-1*t.loan_accomodation.amount).toLocaleString())+" "+t._s("Monthly"==t.loan_accomodation.salary_type?"$":"IQD.")+" ")]),a("br"),a("br"),t._v(" Note: "),a("br"),a("hr"),a("div",{staticStyle:{"white-space":"pre !important"}},[t._v(t._s(t.loan_accomodation.note))]),a("table",{staticClass:"table table-bordered table-striped text-center text-dark mt-3"},[t._m(2),a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.lad_id},[a("td",[a("span",{class:{"text-danger":e.amount<0}},[t._v(" "+t._s(e.amount.toLocaleString())+" "+t._s("Monthly"==t.loan_accomodation.salary_type?"$":"IQD.")+" ")])]),a("td",[t._v(" "+t._s(e.month)+" ")]),a("td",[t._v(" "+t._s(e.year)+" ")])])})),0)])])])])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{color:"black"}},[t._v(" Type ")]),a("th",{staticStyle:{color:"black"}},[t._v(" Amount ")]),a("th",{staticStyle:{color:"black"}},[t._v(" Month ")]),a("th",{staticStyle:{color:"black"}},[t._v(" Year ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 mb-2 text-center"},[t._v(" Amount ")]),a("label",{staticClass:"col-sm-3 mb-2 text-center"},[t._v(" Month ")]),a("label",{staticClass:"col-sm-3 mb-2 text-center"},[t._v(" Year ")]),a("label",{staticClass:"col-sm-3 mb-2 text-center"},[t._v(" Actions ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v(" Amount ")]),a("th",[t._v(" Month ")]),a("th",[t._v(" Year ")])])])}],i=a("1ab6"),n={name:"LoanAccomodation",data(){return{employee_status_filter:null,region:"",staffs:[],employees:[],employee_full_name:"",archived_status:"unarchived",loan_accomodation:{la_id:null,staff_id:null,emp_id:null,la_type:"loan",salary_type:null,amount:0,note:null,la_date:(new Date).toISOString().split("T")[0],archived:"unarchived"},type_filter:"all",month:"",year:null,list:[],rows:[],all_rows:[],user:{username:"",role:"",en_id:null},showSpecialStaffs:"false",emp_id_filter:null}},beforeCreate(){Object(i["a"])("LoanAccomodation")},created(){this.$http.post("/getLoggedInfo").then(({data:t})=>{this.user.username=t.username,this.user.role=t.type,this.user.en_id=t.en_id||null,this.$http.post("/staff/getData").then(({data:t})=>{this.staffs=t.sort((t,e)=>t.staff_sort_code-e.staff_sort_code)}),this.getData()})},computed:{headers(){return"all"==this.archived_status?[{text:"Employee",align:"start",sortable:!1,value:"employee_full_name"},{text:"Staff",align:"start",sortable:!1,value:"staff_name"},{text:"Type",align:"start",sortable:!1,value:"la_type"},{text:"Amount",align:"start",sortable:!0,value:"amount"},{text:"User",align:"start",sortable:!1,value:"user"},{text:"Date (Create)",align:"start",sortable:!1,value:"la_date"},{text:"Date - Time",align:"start",sortable:!0,value:"datetime_create"},{text:"Archived",align:"start",sortable:!0,value:"archived"},{text:"Actions",align:"start",sortable:!1,value:"la_id"}]:[{text:"Employee",align:"start",sortable:!1,value:"employee_full_name"},{text:"Staff",align:"start",sortable:!1,value:"staff_name"},{text:"Type",align:"start",sortable:!1,value:"la_type"},{text:"Amount",align:"start",sortable:!0,value:"amount"},{text:"User",align:"start",sortable:!1,value:"user"},{text:"Date (Create)",align:"start",sortable:!1,value:"la_date"},{text:"Date - Time",align:"start",sortable:!0,value:"datetime_create"},{text:"Actions",align:"start",sortable:!1,value:"la_id"}]},employees_to_filter(){const t=this.rows.map(t=>({emp_id:t.emp_id,full_name:t.employee_full_name})),e=[],a=new Set;for(const o of t)a.has(o.emp_id)||(a.add(o.emp_id),e.push(o));return e}},methods:{getData(){"E"==this.user.role?this.$http.get("/loan_accomodation/getByEngineer/"+this.type_filter+"/"+this.user.en_id+"/"+this.archived_status).then(t=>{this.rows=t.data}):this.$http.post("/loan_accomodation/all",{filter:this.type_filter,archived:this.archived_status,year:this.year,month:this.month}).then(t=>{this.rows=t.data})},clear_loan(){this.loan_accomodation={la_id:null,staff_id:null,emp_id:null,la_type:"loan",salary_type:null,amount:0,note:null,la_date:(new Date).toISOString().split("T")[0],archived:"unarchived"},this.list=[]},delete_item_list(t){this.$confirm("Are you sure you want to delete this item ?","","question").then(()=>{if(this.loan_accomodation.la_id){const e=this.list[t].lad_id;this.$http.delete("/loan_accomodation/delete_detail_by_id/"+e).then(()=>{this.list.splice(t,1)}).catch(()=>{alert("Delete Failed")})}else this.list.splice(t,1)})},addList(){var t=new Date;t.setHours(t.getHours()+3);const e=this.list.filter(t=>t.amount&&t.month&&t.year);return 0==e.length?alert("Please fill all fields"):this.loan_accomodation.emp_id&&this.loan_accomodation.staff_id&&this.loan_accomodation.amount?void this.$http.post("/loan_accomodation/create_list",{loan_accomodation:{emp_id:this.loan_accomodation.emp_id,st_id:this.loan_accomodation.staff_id,la_type:this.loan_accomodation.la_type,amount:this.loan_accomodation.amount,salary_type:this.loan_accomodation.salary_type,datetime_create:t,user:this.user.username,note:this.loan_accomodation.note,la_date:this.loan_accomodation.la_date,archived:this.loan_accomodation.archived},list:e}).then(()=>{this.getData(),this.clear_loan()}):alert("Please all fields")},updateList(){const t=this.list.filter(t=>t.amount&&t.month&&t.year);if(0==t.length)return alert("Please fill all fields");if(!this.loan_accomodation.emp_id||!this.loan_accomodation.staff_id||!this.loan_accomodation.amount)return alert("Please all fields");var e=new Date;e.setHours(e.getHours()+3),this.$http.patch("/loan_accomodation/update_list",{loan_accomodation:{la_id:this.loan_accomodation.la_id,emp_id:this.loan_accomodation.emp_id,st_id:this.loan_accomodation.staff_id,la_type:this.loan_accomodation.la_type,amount:this.loan_accomodation.amount,salary_type:this.loan_accomodation.salary_type,datetime_create:e,user:this.user.username,note:this.loan_accomodation.note,la_date:this.loan_accomodation.la_date,archived:this.loan_accomodation.archived}}).then(()=>{this.getData(),this.clear_loan()})},getSingleLoanAccomodation(t){this.loan_accomodation={la_id:null,staff_id:null,emp_id:null,la_type:"loan",salary_type:null,amount:0,note:null,la_date:(new Date).toISOString().split("T")[0],archived:"unarchived"},this.list=[],this.loan_accomodation.la_id=t.la_id,this.loan_accomodation.staff_id=t.st_id,setTimeout(()=>{this.loan_accomodation.emp_id=t.emp_id,this.region=t.country},200),this.loan_accomodation.la_type=t.la_type,this.loan_accomodation.salary_type=t.salary_type,this.loan_accomodation.amount=t.amount,this.loan_accomodation.note=t.note,this.loan_accomodation.la_date=new Date(t.la_date).toISOString().split("T")[0],this.loan_accomodation.archived=t.archived,this.employee_full_name=t.employee_full_name,this.$http.get("/loan_accomodation/get_detail/"+t.la_id).then(t=>{this.list=t.data})},delete_list(t){this.$confirm("Are you sure you want to delete this list ?","","question").then(()=>{this.$http.delete("/loan_accomodation/delete_by_id/"+t).then(()=>{this.getData()}).catch(()=>{alert("Delete Failed")})})},set_amount(t,e){this.loan_accomodation.la_id&&this.$http.patch("/loan_accomodation/set_amount/"+t,{amount:e}).then(()=>{}).catch(()=>{alert("Update Failed")})},set_month(t,e){this.loan_accomodation.la_id&&this.$http.patch("/loan_accomodation/set_month/"+t,{month:e}).then(()=>{}).catch(()=>{alert("Update Failed")})},set_year(t,e){this.loan_accomodation.la_id&&this.$http.patch("/loan_accomodation/set_year/"+t,{year:e}).then(()=>{}).catch(()=>{alert("Update Failed")})},push_item_list(){this.loan_accomodation.la_id?this.$http.post("/loan_accomodation/add_detail",{la_id:this.loan_accomodation.la_id,amount:0,month:(new Date).getMonth()+1,year:(new Date).getFullYear()}).then(t=>{this.list.push({lad_id:t.data.new_id,la_id:this.loan_accomodation.la_id,amount:0,month:(new Date).getMonth()+1,year:(new Date).getFullYear()})}).catch(()=>{alert("Add Failed")}):this.list.push({la_id:null,amount:0,month:null,year:(new Date).getFullYear()})},isValidDate(t){let e=new Date(t);return e instanceof Date&&!isNaN(e)},print_all(){this.all_rows=[];let t=this.rows.map(t=>t.la_id);this.$http.post("/loan_accomodation/getAllDetailByIds",{ids:t}).then(t=>{this.all_rows=t.data,setTimeout(()=>{window.print()},500)})},removeDuplicateObjects(t){const e=[],a=new Set;for(const o of t){const t=JSON.stringify(o);a.has(t)||(a.add(t),e.push(o))}return e}},watch:{"loan_accomodation.staff_id":function(t){this.employees=[],this.loan_accomodation.emp_id=null,t?this.$http.post("/employee/getEmployeeBystaffForLoan/"+this.loan_accomodation.staff_id).then(({data:t})=>{this.employees=t}):this.employees=[]},"loan_accomodation.emp_id":function(t){document.activeElement==document.getElementById("employee-select")&&(t?(this.region=this.employees.find(e=>e.emp_id==t).country,this.loan_accomodation.salary_type=this.employees.find(e=>e.emp_id==t).salary_type):(this.region="",this.loan_accomodation.salary_type=null))},archived_status(){this.getData()},type_filter(){this.getData()},month(){this.getData()},year(){this.getData()}},filters:{country_filter(t){return{1:"Iraq",2:"Foreign",3:"Iran",4:"Bangladish",5:"Syria",6:"India",7:"Pakistan"}[t]}}},l=n,r=(a("4dfa"),a("2877")),c=a("6544"),d=a.n(c),m=(a("2bfd"),a("b974")),u=a("8654"),_=a("d9f7"),h=a("80d2");const p={...m["b"],offsetY:!0,offsetOverflow:!0,transition:!1};var v=m["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,a)=>a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:m["a"].options.props.menuProps.type,default:()=>p},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...m["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(t=>this.getValue(t))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(t=>!this.hasItem(t)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(t=>{const e=Object(h["r"])(t,this.itemText),a=null!=e?String(e):"";return this.filter(t,String(this.internalSearch),a)})},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch!==t&&(this.lazySearch=t,this.$emit("update:search-input",t))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=m["a"].options.computed.$_menuProps.call(this);return t.contentClass=("v-autocomplete__content "+(t.contentClass||"")).trim(),{...p,...t}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(t=>this.valueComparator(this.getValue(t),this.getValue(this.internalValue)))},listData(){const t=m["a"].options.computed.listData.call(this);return t.props={...t.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=null)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(t,e){if(t!==e){if(!this.autoSelectFirst){const a=e[this.$refs.menu.listIndex];a?this.setMenuIndex(t.findIndex(t=>t===a)):this.setMenuIndex(-1),this.$emit("update:list-index",this.$refs.menu.listIndex)}this.$nextTick(()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.autoSelectFirst&&t.length&&(this.setMenuIndex(0),this.$emit("update:list-index",this.$refs.menu.listIndex)))})}},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){this.searchIsDirty||(this.multiple&&t===h["x"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===h["x"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==h["x"].backspace&&t!==h["x"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const t=this.selectedIndex,e=this.selectedItems[t];if(!this.isInteractive||this.getDisabled(e))return;const a=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==a)return void(this.selectedIndex=a);const o=this.selectedItems.length,s=t!==o-1?t:t-1,i=this.selectedItems[s];i?this.selectItem(e):this.setValue(this.multiple?[]:null),this.selectedIndex=s},clearableCallback(){this.internalSearch=null,m["a"].options.methods.clearableCallback.call(this)},genInput(){const t=u["a"].options.methods.genInput.call(this);return t.data=Object(_["a"])(t.data,{attrs:{"aria-activedescendant":Object(h["p"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(h["p"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot(){const t=m["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?m["a"].options.methods.genSelections.call(this):[]},onClick(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,a=e.value;e.value&&this.activateMenu(),this.internalSearch=a,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;!t.ctrlKey&&[h["x"].home,h["x"].end].includes(e)||m["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){m["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(t){t.preventDefault(),this.activateMenu()},selectItem(t){m["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){m["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy(t){var e,a;if(-1===this.selectedIndex)return;const o=this.selectedItems[this.selectedIndex],s=this.getText(o);null==(e=t.clipboardData)||e.setData("text/plain",s),null==(a=t.clipboardData)||a.setData("text/vnd.vuetify.autocomplete.item+plain",s),t.preventDefault()}}}),f=a("8336"),y=a("ac7c"),g=a("8fea"),b=a("132d"),S=Object(r["a"])(l,o,s,!1,null,"3dd3e488",null);e["default"]=S.exports;d()(S,{VAutocomplete:v,VBtn:f["a"],VCheckbox:y["a"],VDataTable:g["a"],VIcon:b["a"]})},"2bfd":function(t,e,a){},"4dfa":function(t,e,a){"use strict";a("02e8")}}]);
//# sourceMappingURL=chunk-2d497a65.49f61981.js.map