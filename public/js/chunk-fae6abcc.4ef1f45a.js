(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fae6abcc"],{1724:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrapper"}},[a("navbar",{staticClass:"animate__animated animate__fadeInLeft no-print",staticStyle:{display:"none"},attrs:{id:"nav"}}),a("div",{staticClass:"d-flex flex-column animate__animated animate__fadeInRight",staticStyle:{display:"none !important"},attrs:{id:"content-wrapper"}},[a("div",{attrs:{id:"content"}},[a("header-btn"),a("div",{staticClass:"container-fluid text-dark"},[a("div",{staticClass:"d-sm-flex justify-content-between align-items-center mb-4"},[a("h3",{staticClass:"text-dark "},[t._v(" "+t._s("Salary List for month")+" "+t._s(t.month+"/"+t.year)+" ")])]),a("hr"),a("div",{staticClass:"row",staticStyle:{"overflow-x":"auto"}},[a("label",{staticClass:"col-sm-1 mt-1 no-print"},[t._v(" "+t._s("Month")+" : ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.month,expression:"month"}],staticClass:"form-control col-sm-1 no-print",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.month=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[t._v("1")]),a("option",{attrs:{value:"2"}},[t._v("2")]),a("option",{attrs:{value:"3"}},[t._v("3")]),a("option",{attrs:{value:"4"}},[t._v("4")]),a("option",{attrs:{value:"5"}},[t._v("5")]),a("option",{attrs:{value:"6"}},[t._v("6")]),a("option",{attrs:{value:"7"}},[t._v("7")]),a("option",{attrs:{value:"8"}},[t._v("8")]),a("option",{attrs:{value:"9"}},[t._v("9")]),a("option",{attrs:{value:"10"}},[t._v("10")]),a("option",{attrs:{value:"11"}},[t._v("11")]),a("option",{attrs:{value:"12"}},[t._v("12")])]),a("label",{staticClass:"col-sm-1 mt-1 no-print"},[t._v(" "+t._s("Year")+" : ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"form-control col-sm-1 no-print",attrs:{type:"number"},domProps:{value:t.year},on:{input:function(e){e.target.composing||(t.year=e.target.value)}}}),a("button",{staticClass:"btn btn-success mx-3 no-print",staticStyle:{height:"40px"},on:{click:function(e){return t.search()}}},[t._v(" "+t._s("Search")+" "),a("i",{staticClass:"fa fa-search"})]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.st_id,expression:"st_id"}],staticClass:"form-control col-sm-2 float-left no-print",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.st_id=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._l(t.staffs.filter((function(e){return e.special_staff==t.showSpecialStaffs})),(function(e){return a("option",{key:e.st_id,domProps:{value:e.st_id}},[t._v(" "+t._s(e.staff_name)+" ")])}))],2),a("span",{staticClass:"col-1 no-print"},[a("v-checkbox",{staticClass:"mt-1 custom-checkbox-label",attrs:{"true-value":"true","false-value":"false",label:"Specials"},model:{value:t.showSpecialStaffs,callback:function(e){t.showSpecialStaffs=e},expression:"showSpecialStaffs"}})],1)]),a("hr",{staticClass:"no-print"}),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-1 mt-2"},[t._v(" 1 $ = ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dollar,expression:"dollar"}],staticClass:"form-control col-sm-1",attrs:{type:"number",min:"0"},domProps:{value:t.dollar},on:{input:function(e){e.target.composing||(t.dollar=e.target.value)}}}),a("label",{staticClass:"mx-4 mt-2"},[t._v(" ACS Number: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.acs_number.acs_number,expression:"acs_number.acs_number"}],staticClass:"form-control col-sm-1",attrs:{min:"0"},domProps:{value:t.acs_number.acs_number},on:{input:function(e){e.target.composing||t.$set(t.acs_number,"acs_number",e.target.value)}}}),a("button",{staticClass:"col-sm-1 btn btn-success ml-3 no-print",attrs:{"data-toggle":"modal","data-target":"#mdlUsedAcs"},on:{click:function(e){return t.getLastUsedAcsNumbers()}}},[a("i",{staticClass:"fas fa-list"})]),a("button",{staticClass:"col-sm-2 btn btn-primary ml-3 no-print",on:{click:function(e){return t.create_monthly_receipt()}}},[t._v(" Create monthly receipt ")]),a("button",{staticClass:"col-sm-2 btn btn-danger ml-2 no-print",on:{click:function(e){return t.delete_monthly_receipt()}}},[t._v(" Delete monthly receipt ")])]),a("hr"),a("label",{staticClass:"w-100 multi-language my-3"},[t._v(" "+t._s("Staff")+" : "),""!=t.st_id?a("span",[t._v(" "+t._s(t.staffs.filter((function(e){return e.st_id==t.st_id}))[0].staff_name)+" ")]):t._e()]),a("div",{staticClass:"alert alert-primary text-center",staticStyle:{display:"none"},attrs:{id:"waiting"}},[t._v(" Waiting... ")]),a("table",{staticClass:"table table-bordered table-striped text-dark text-center mt-2",attrs:{id:"tbl"}},[t._m(0),a("tbody",t._l(t.pre_gived_salaries,(function(e){return a("tr",{key:e.emp_id},[a("td",[t._v(" "+t._s(e.full_name)+" ")]),a("td",[t._v(" "+t._s(e.salary_type)+" ")]),a("td",[a("v-icon",{attrs:{color:"success"}},[t._v(" mdi-check ")])],1)])})),0)])])],1)]),a("div",{staticClass:"modal text-dark animate__animated animate__fadeInDown animate__faster",attrs:{id:"mdlUsedAcs"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("table",{staticClass:"table table-bordered text-dark text-center mt-3"},[t._m(2),a("tbody",t._l(t.last_used_acs_numbers,(function(e){return a("tr",{key:e.acs_number_id},[a("td",[t._v(" "+t._s(e.acs_number)+" ")]),a("td",[t._v(" "+t._s(e.staff_name)+" ")]),a("td",[t._v(" "+t._s(e.month)+" / "+t._s(e.year)+" ")])])})),0)])])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v(" Name ")]),a("th",[t._v(" Salary Type ")]),a("th",[t._v(" Save ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"}},[t._v("Ã—")]),a("h5",{staticClass:"mt-2"},[t._v(" Last Used ACS Numbers ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{staticStyle:{width:"30%"}},[t._v(" Acs Number ")]),a("th",[t._v(" Staff ")]),a("th",[t._v(" Date ")])])}],i=a("1ab6"),n={data(){return{month:(new Date).getMonth(),year:(new Date).getFullYear(),employees:[],staffs:[],pre_gived_salaries:[],st_id:"",dollar:0,showSpecialStaffs:"false",acs_number:{},last_acs_number:null,last_used_acs_numbers:[]}},beforeCreate(){Object(i["a"])("givedSalaryReport")},created(){this.$http.post("/staff/getData").then(({data:t})=>{this.staffs=t.filter(t=>"1"==t.show_staff).sort((t,e)=>t.staff_sort_code-e.staff_sort_code)})},methods:{search(){this.year>=2020&&""!=this.st_id?(document.getElementById("tbl").style.display="none",document.getElementById("waiting").style.display="block",this.$http.post("/gived_salary/getPreGivedSalary/"+this.st_id+"/"+this.month+"/"+this.year).then(({data:t})=>{this.pre_gived_salaries=t.rows,this.acs_number=t.acs_number,"undefined"==typeof this.pre_gived_salaries[0]?this.dollar=0:this.dollar=this.pre_gived_salaries[0].dollar_price,document.getElementById("tbl").style.display="",document.getElementById("waiting").style.display="none"})):(this.pre_gived_salaries=[],document.getElementById("tbl").style.display="none")},create_monthly_receipt(){Number(this.dollar)<=0||Number(this.year<2020)||!this.acs_number.acs_number||!this.st_id?this.$alert("Enter correct data","","warning"):this.$confirm("Are you sure you want create receipt for this staff ?","","question").then(()=>{this.$http.post("/gived_salary/addListOfEmployees/"+this.st_id,{dollar_price:this.dollar,salary_month:this.month,salary_year:this.year,acs_number:this.acs_number.acs_number}).then(({data:t})=>{this.pre_gived_salaries=t.rows,this.acs_number.acs_number_id=t.acs_number_id,this.dollar=this.pre_gived_salaries[0].dollar_price||0,this.getLastUsedAcsNumbers()}).catch(t=>{this.$alert(t.response.data.message||"Something went wrong","","error")})})},delete_monthly_receipt(){this.st_id?this.$confirm(`Are you sure you want delete monthly reciept ${this.month}/${this.year} for staff ${this.staffs.find(t=>t.st_id==this.st_id).staff_name} ?`,"","question").then(()=>{this.$http.delete("/gived_salary/deleteGiveSalary/"+this.month+"/"+this.year+"/"+this.st_id).then(()=>{this.pre_gived_salaries=[]}).catch(()=>{this.$alert("Something went wrong","","error")})}):this.$alert("Please Chosse a staff","","warning")},getLastUsedAcsNumbers(){this.last_used_acs_numbers=[],this.year&&this.$http.post("/gived_salary/getLastUsedAcsNumbers/"+this.year).then(t=>{this.last_used_acs_numbers=t.data})}},computed:{get_total_salary(){var t=0;return this.pre_gived_salaries.length>0&&this.pre_gived_salaries.forEach(e=>{t+=e.last_give_salary}),t}},filters:{money_filter(t){if("undefined"==typeof t)return 0;var e=[],a="";t=t.toString(),t.includes(".")?(a=t.substring(t.indexOf(".")),e=t.substring(0,t.indexOf(".")).split("").reverse()):e=t.split("").reverse();var s=[];for(let i=0;i<e.length;i++)s.unshift(e[i]),(i+1)%3==0&&s.unshift(",");".000"==a&&(a="");var r=s.join("")+a;return","==r.charAt(0)?r.slice(1):r}},watch:{st_id(){this.search()},month(){this.search()},year(){this.search()}}},l=n,o=(a("c9d7"),a("2877")),c=a("6544"),d=a.n(c),_=a("ac7c"),m=a("132d"),u=Object(o["a"])(l,s,r,!1,null,"3dc9ca34",null);e["default"]=u.exports;d()(u,{VCheckbox:_["a"],VIcon:m["a"]})},b3fe:function(t,e,a){},c9d7:function(t,e,a){"use strict";a("b3fe")}}]);
//# sourceMappingURL=chunk-fae6abcc.4ef1f45a.js.map