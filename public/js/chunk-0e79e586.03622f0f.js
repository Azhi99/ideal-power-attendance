(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e79e586"],{2259:function(e,t,a){"use strict";a("7e58")},"4a8a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("navbar",{staticClass:"animate__animated animate__fadeInLeft no-print",staticStyle:{display:"none"},attrs:{id:"nav"}}),a("div",{staticClass:"d-flex flex-column animate__animated animate__fadeInRight",staticStyle:{display:"none !important"},attrs:{id:"content-wrapper"}},[a("div",{attrs:{id:"content"}},[a("header-btn"),a("div",{staticClass:"container-fluid"},[a("h3",{staticClass:"text-dark multi-language mt-1-print"},[e._v(" "+e._s(e.employeeLangauge[e.language].employees)+" ")]),a("hr"),a("div",{staticClass:"row",staticStyle:{"overflow-x":"auto"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.active_status,expression:"active_status"}],staticClass:"form-control col-5 mr-1",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.active_status=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[e._v("Actived")]),a("option",{attrs:{value:"0"}},[e._v("Deactived")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.staff_id,expression:"staff_id"}],staticClass:"form-control col-5 ml-1",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.staff_id=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),e._l(e.staffs,(function(t){return a("option",{key:"staff"+t.st_id,domProps:{value:t.st_id}},[e._v(" "+e._s(t.staff_name)+" ")])}))],2),a("table",{staticClass:"table table-bordered table-striped text-dark text-center mt-4"},[a("thead",[a("th",[e._v(" Name ")]),a("th",[e._v(e._s(e.employeeLangauge[e.language].staff))]),a("th",[e._v(e._s(e.employeeLangauge[e.language].phone))]),a("th",[e._v(" Phone 2 ")]),a("th",[e._v(" Blood Group ")]),a("th",{staticClass:"no-print",staticStyle:{width:"6%"}},[e._v(" Actions ")])]),a("tbody",e._l(e.employees,(function(t){return a("tr",{key:t.emp_id},[a("td",[e._v(" "+e._s(t.first_name+" "+t.last_name)+" ")]),a("td",[e._v(" "+e._s(t.staff_name)+" ")]),a("td",[e._v(" "+e._s(t.phone)+" ")]),a("td",[e._v(" "+e._s(t.phone2)+" ")]),a("td",[e._v(" "+e._s(t.blood_group)+" ")]),a("td",{staticClass:"no-print"},[a("button",{staticClass:"btn btn-success mx-1 btn-sm",attrs:{"data-toggle":"modal","data-target":"#mdl_employee_documents"},on:{click:function(a){return e.getEmployeeDocuments(t.emp_id)}}},[a("i",{staticClass:"fa fa-file"})]),a("button",{staticClass:"btn btn-primary btn-sm",attrs:{"data-toggle":"modal","data-target":"#mdl_employee"},on:{click:function(a){return e.get_employee(t.emp_id)}}},[a("i",{staticClass:"fa fa-eye"})])])])})),0)])])])],1)]),a("div",{staticClass:"modal text-dark animate__animated animate__fadeInDown animate__faster",attrs:{id:"mdl_employee"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"}},[e._v(" × ")]),a("h5",{staticClass:"mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].employee_information)+" ")])]),a("div",{staticClass:"modal-body "},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"w-100 d-flex justify-content-center mb-4"},[e.single_employee.personal_image_path?a("img",{staticClass:"mx-auto",attrs:{width:"180px;",src:e.$image_path+"/employee/personal_image/"+e.single_employee.personal_image_path}}):e._e()]),a("div",{staticClass:"row"},[a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].first_name)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.first_name)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].last_name)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.last_name)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].staff)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.st_id?e.staffs.find((function(t){return t.st_id==e.single_employee.st_id})).staff_name:"")+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].phone)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.phone)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Phone 2: ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.phone2)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Family Number: ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.family_number_1)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Family Number 2: ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.family_number_2)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].country)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e._f("country_filter")(e.single_employee.country))+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Job : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.job)+" ")]),"1"!=e.single_employee.country?a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].expire_passport)+" : ")]):e._e(),"1"!=e.single_employee.country?a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.expiry_passport?new Date(e.single_employee.expiry_passport).toISOString().split("T")[0]:"")+" ")]):e._e(),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].registration_date)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.reg_date?new Date(e.single_employee.reg_date).toISOString().split("T")[0]:"")+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Asaish Code : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.asaish_code)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Car : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.car)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Car Number : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.car_number)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Location : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.living_location)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].salary_type)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.salary_type)+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].food)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.food_money||0).toLocaleString())+" "),a("span",[e._v(" IQD. ")])]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].transport)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.transport_money||0).toLocaleString())+" "),a("span",[e._v(" IQD. ")])]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Cabina : ")]),a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.cabina_money||0).toLocaleString())+" "),a("span",[e._v(" IQD. ")])]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Loan : ")]),a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.loan_money||0).toLocaleString())+" "),a("span",[e._v(" IQD. ")])]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Accomodation : ")]),a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.accomodation_money||0).toLocaleString())+" "),a("span",[e._v(" IQD. ")])]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Fine : ")]),a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.fine_money||0).toLocaleString())+" "),a("span",[e._v(" IQD. ")])]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Salary Per Month : ")]),a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.other_expense||0).toLocaleString())+" "),a("span",[e._v(" IQD. ")])]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].salary)+" : ")]),"Monthly"==e.single_employee.salary_type?a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.monthly_salary||0).toLocaleString())+" $ ")]):a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s((e.single_employee.daily_salary||0).toLocaleString())+" IQD ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" "+e._s(e.employeeLangauge[e.language].hour_salary)+" : ")]),a("label",{staticClass:"col-sm-9 form-control text-center",attrs:{dir:"ltr"}},[e._v(" "+e._s(e.single_employee.hour_salary)+" "),"Monthly"==e.single_employee.salary_type?a("span",[e._v(" $ ")]):a("span",[e._v(" IQD ")])]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" First work date: ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.first_work_date?new Date(e.single_employee.first_work_date).toISOString().split("T")[0]:"")+" ")]),a("label",{staticClass:"col-sm-3 text-center mt-2"},[e._v(" Blood Group: ")]),a("label",{staticClass:"col-sm-9 form-control text-center"},[e._v(" "+e._s(e.single_employee.blood_group)+" ")])])])])])])]),a("div",{staticClass:"modal text-dark animate__animated animate__fadeInDown animate__faster",attrs:{id:"mdl_employee_documents"}},[a("div",{staticClass:"modal-dialog modal-xl"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"btn btn-danger",attrs:{"data-dismiss":"modal"},on:{click:function(t){return e.clearDocument()}}},[e._v("×")]),a("h5",{staticClass:"mt-2"},[e._v(" Employee Documents "),e.selectedDocument.employee_document_id?a("button",{staticClass:"btn btn-success btn-sm ms-2",on:{click:function(t){return e.downloadDocument()}}},[a("i",{staticClass:"fas fa-download"})]):e._e()])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"container-fluid px-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-12",style:"height: 450px; overflow-y: auto; border-right: 1px solid grey;"},e._l(e.documents,(function(t){return a("div",{key:"document"+t.employee_document_id,staticClass:"row p-0 mx-0 my-2"},[a("div",{staticClass:"col-12 px-0 m-0"},[a("button",{class:" btn btn-block btn-sm "+(e.selectedDocument&&t.employee_document_id==e.selectedDocument.employee_document_id?"btn-success":"btn-secondary"),on:{click:function(a){return e.selectDocument(t)}}},["pdf"==t.document_type?a("i",{staticClass:"fa fa-file-pdf"}):a("i",{staticClass:"fa fa-image"}),a("span",{staticClass:"ms-1"},[e._v(" "+e._s(t.employee_document_virtual_name)+" ")])])])])})),0),a("div",{staticClass:"col-xl-9 col-lg-9 col-md-9 col-sm-12"},[e.selectedDocumentFile?[a("div",["pdf"==e.selectedDocument.document_type?a("ViewPDF",{attrs:{download_file_name:e.selectedDocument.employee_document_virtual_name,trigger_download:e.trigger_download,src:e.documentUrl,customClass:"view-pdf",design:"border-radius: 3px; width: 96.5%; min-height: 450px; max-height: 450px; overflow-y: auto;"}}):a("viewer",{attrs:{options:{navbar:!1,title:!1,keyboard:!1,fullscreen:!0}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.documentUrl}})])],1)]:e._e()],2)])])])])])])],1)},l=[],o=a("1ab6"),n=a("1157"),i=a.n(n),c=a("cba0"),r=a("cbf4"),m=a("4220"),_={components:{ViewPDF:m["a"]},name:"employeeReport",data(){return{noOfEmployees:0,employees:[],active_status:"1",single_employee:{},search:"",current_pagination:1,max_pagination:0,employeeLangauge:r["a"],language:"English",user:{username:"",role:"",en_id:null},staffs:[],staff_id:null,documents:[],selectedDocument:{},selectedDocumentFile:null,trigger_download:!1,selected_emp_id:null}},beforeCreate(){Object(o["a"])("employeeReport")},created(){this.$http.post("/getLoggedInfo").then(({data:e})=>{this.user.username=e.username,this.user.role=e.type,this.user.en_id=e.en_id||null,this.user.en_id?this.$http.get("/employee/getEmployeeByEngineer/"+this.user.en_id).then(({data:e})=>{this.employees=e}):this.$http.post("/employee/getActived").then(({data:e})=>{this.employees=e})}),this.$http.post("/staff/getData").then(({data:e})=>{this.staffs=e.filter(e=>"1"==e.show_staff)})},mounted(){c["a"].$on("languageChanged",e=>{this.language=e,["Kurdish","Arabic"].includes(e)?(i()(".multi-language").addClass("rtl"),i()("#wrapper").attr("dir","rtl")):(i()(".multi-language").removeClass("rtl"),i()("#wrapper").attr("dir","ltr"))})},methods:{getData(){this.$http.post("/employee/getForReport?active_status="+this.active_status+(this.staff_id?"&st_id="+this.staff_id:"")).then(({data:e})=>{this.employees=e})},get_employee(e){this.$http.get("/employee/getById/"+e).then(({data:e})=>{this.single_employee=e.data})},clearDocument(){this.selectedDocument={},this.selectedDocumentFile=null,this.selected_emp_id=null},getEmployeeDocuments(e){this.clearDocument(),this.selected_emp_id=e,this.$http.get("/employee/get_documents/"+e).then(({data:e})=>{this.documents=e})},async selectDocument(e){this.selectedDocument=JSON.parse(JSON.stringify(e));const t=await this.$http.get("/employee/get_document_file/"+e.employee_document+"/"+e.document_type,{responseType:"arraybuffer"}),a=new Blob([t.data],{type:"pdf"==e.document_type?"application/pdf":"image/*"}),s=new File([a],e.employee_document);this.selectedDocumentFile=s},downloadDocument(){this.selectedDocument.employee_document_id&&this.selectedDocumentFile&&(this.trigger_download=!this.trigger_download)}},computed:{documentUrl(){return this.selectedDocumentFile?URL.createObjectURL(this.selectedDocumentFile):null}},filters:{status_filter(e,t){return[r["a"][t].deactive,r["a"][t].active][e]},salary_type_filter(e){return"Monthly"==e?"Monthly":"Daily"},country_filter(e){return{1:"Iraq",2:"Foreign",3:"Iran",4:"Bangladish",5:"Syria",6:"India",7:"Pakistan"}[e]}},watch:{staff_id(){this.getData()},active_status(){this.getData()},trigger_download(){if(this.selectedDocument&&this.selectedDocumentFile&&"image"==this.selectedDocument.document_type){const e=document.createElement("a");e.href=URL.createObjectURL(this.selectedDocumentFile);let t=this.selectedDocument.employee_document_virtual_name;t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".png")||(t=t+"."+this.selectedDocument.employee_document.split(".").pop()),e.download=t,e.click()}}}},d=_,p=(a("2259"),a("2877")),u=Object(p["a"])(d,s,l,!1,null,"8817a918",null);t["default"]=u.exports},"7e58":function(e,t,a){}}]);
//# sourceMappingURL=chunk-0e79e586.03622f0f.js.map